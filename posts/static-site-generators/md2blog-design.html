<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Schemescape: Designing md2blog, a zero-config static site generator for dev blogs</title>
<meta name="description" content="Here&#39;s the design of my in-progress static site generator, md2blog." />
<meta name="keywords" content="metalsmith,md2blog" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<link rel="stylesheet" href="../../css/style.css" />

</head>
<body>
<header>
<h1><a href="../../index.html">Schemescape</a></h1>
<p>Development log of a life-long coder</p>
<nav>
<ul>
<li><a href="../../posts/static-site-generators/index.html">static-site-generators</a></li>
<li><a href="../../posts/metalsmith/index.html">metalsmith</a></li>
<li><a href="../../posts/md2blog/index.html">md2blog</a></li>
</ul>
</nav>
</header>
<main>
<article>
<header>
<h1><a href="../../posts/static-site-generators/md2blog-design.html">Designing md2blog, a zero-config static site generator for dev blogs</a></h1>
<p><time datetime="2021-10-27">October 27, 2021</time></p>
</header>
<h1 id="background">Background</h1>
<p>After <a href="comparison.html">investigating many popular static site generators</a>, I wasn&#39;t able to find a convenient static site generator that met my needs out of the box. Fortunately, I was able to leverage <a href="https://metalsmith.io/">Metalsmith</a> (and numerous plugins) to get what I wanted. I&#39;m calling the resulting tool <strong>md2blog</strong>.</p>
<p>In this post, I&#39;m going to cover the design of md2blog. Note that md2blog is a work in progress that has not been released yet.</p>
<h1 id="design-goals">Design goals</h1>
<p>Here&#39;s the overarching goal of md2blog:</p>
<blockquote>
<p>Convert a <em>self-contained, organized</em> pile of <a href="https://daringfireball.net/projects/markdown/">Markdown</a> posts into a <em>minimal, but fully functional</em> static blog, requiring <em>zero configuration</em>.</p>
</blockquote>
<p>The key differentiator for md2blog is the &quot;self-contained, organized&quot; part. By this, I mean:</p>
<ul>
<li><strong>Relative links between Markdown files (including anchors) &quot;just work&quot;</strong> (and are validated at build time)</li>
<li>Source Markdown files <strong>can be viewed (with links and images) in any Markdown previewer</strong> (e.g. VS Code or GitHub)</li>
<li>Posts are <strong>implicitly categorized based on directory structure</strong> (supplemental tags are also supported)</li>
</ul>
<p>Additionally, the produced site is &quot;minimal, but fully functional&quot; in the following sense:</p>
<ul>
<li>Page templates use <strong>clean, semantic HTML</strong> with only a few kilobytes of CSS (and no JavaScript)</li>
<li><strong>Relative links are used wherever possible</strong>, so the site can be hosted anywhere (or even viewed directly from the file system)</li>
<li><strong>Syntax highlighting</strong> is automatically added to code blocks</li>
<li>An <a href="https://validator.w3.org/feed/docs/atom.html">Atom</a>/RSS news feed is automatically generated</li>
</ul>
<p>Note that &quot;zero configuration&quot; implies that md2blog is highly opinionated, to the point that there are no options to configure. <strong>Instead of fiddling with options and themes, the user&#39;s focus is strictly on writing and publishing content.</strong></p>
<h1 id="input">Input</h1>
<p>Here&#39;s a more detailed look at building a dev blog with md2blog.</p>
<h2 id="directory-structure">Directory structure</h2>
<ul>
<li><code>content/</code>: Root directory that contains all source content for the site<ul>
<li><code>site.json</code>: Site-wide metadata</li>
<li><code>assets/</code>: Directory for assets (e.g. images)</li>
<li><code>posts/</code>: Directory for all posts<ul>
<li><code>category1/</code>: Directory for posts related to &quot;category1&quot;<ul>
<li><code>post1.md</code>: Post related to &quot;category1&quot;</li>
<li><code>post2.md</code>: Another &quot;category1&quot; post</li>
</ul>
</li>
<li><code>category2/</code>: Another category<ul>
<li><code>post3.md</code>: &quot;category2&quot; post</li>
<li>etc.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="sitejson">site.json</h2>
<p>Here&#39;s an example <code>site.json</code> file:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;My dev blog&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://mydevblog.com/&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A very good dev blog indeed&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Schema:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required?</th>
<th>Note</th>
</tr>
</thead>
<tbody><tr>
<td><code>title</code></td>
<td>string</td>
<td>Required</td>
<td></td>
</tr>
<tr>
<td><code>url</code></td>
<td>string</td>
<td>Recommended</td>
<td>Must end with &quot;/&quot;</td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>Optional</td>
<td></td>
</tr>
</tbody></table>
<p>Note that the site <em>will</em> generally work without specifying a URL, but the Atom feed will be forced to use relative links instead of absolute URLs.</p>
<h2 id="posts">Posts</h2>
<p>Posts are written in Markdown and use YAML for front matter.</p>
<h3 id="front-matter">Front matter</h3>
<p>Here&#39;s an example showing all of the supported YAML front matter properties (<code>keywords</code> and <code>draft</code> are optional, the rest are required):</p>
<pre><code class="language-yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">title:</span> <span class="hljs-string">First</span> <span class="hljs-string">post</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">First</span> <span class="hljs-string">post</span> <span class="hljs-string">on</span> <span class="hljs-string">my</span> <span class="hljs-string">blog,</span> <span class="hljs-string">with</span> <span class="hljs-string">a</span> <span class="hljs-string">relative</span> <span class="hljs-string">link.</span>
<span class="hljs-attr">date:</span> <span class="hljs-number">2021-10-26</span>
<span class="hljs-attr">keywords:</span> [<span class="hljs-string">additional-tag</span>]
<span class="hljs-attr">draft:</span> <span class="hljs-literal">true</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">(Markdown</span> <span class="hljs-string">content</span> <span class="hljs-string">follows...)</span>
</code></pre>
<p>Schema:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required?</th>
<th>Note</th>
</tr>
</thead>
<tbody><tr>
<td><code>title</code></td>
<td>string</td>
<td>Required</td>
<td></td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>Required</td>
<td>This text is displayed on index pages</td>
</tr>
<tr>
<td><code>date</code></td>
<td>YYYY-MM-DD</td>
<td>Required</td>
<td></td>
</tr>
<tr>
<td><code>keywords</code></td>
<td>string[]</td>
<td>Optional</td>
<td>Additional tags for categorizing the post</td>
</tr>
<tr>
<td><code>draft</code></td>
<td>Boolean</td>
<td>Optional</td>
<td>If <code>true</code>, the post will only be built when serving locally</td>
</tr>
</tbody></table>
<h3 id="content">Content</h3>
<p>Here&#39;s example Markdown content, demonstrating relative links (these links get translated to the corresponding HTML files and checked at build time; they also work in VS Code&#39;s and GitHub&#39;s Markdown previewers):</p>
<pre><code class="language-markdown"><span class="hljs-section"># Relative links</span>
Here&#x27;s a relative link to another post in this category: [<span class="hljs-string">link</span>](<span class="hljs-link">post2.md</span>)!

And here&#x27;s one to another category, with an anchor: [<span class="hljs-string">link 2</span>](<span class="hljs-link">../category2/post3.md#some-section</span>).

<span class="hljs-section"># Image</span>
Here&#x27;s an image:
![<span class="hljs-string">test</span>](<span class="hljs-link">../../assets/test.png</span>)
</code></pre>
<p>Finally, here is an example of including a code block (specifying the language is recommended, but optional):</p>
<pre><code class="language-markdown"><span class="hljs-section"># Code block</span>
Here&#x27;s some code:

<span class="hljs-code">```javascript
const add = (a, b) =&gt; a + b;
```</span>
</code></pre>
<h1 id="output">Output</h1>
<p>All output is written to the <code>out/</code> directory. Here&#39;s what the output might look like for the example above:</p>
<ul>
<li><code>index.html</code>: Home page</li>
<li><code>404.html</code>: Error page</li>
<li><code>feed.xml</code>: Atom news feed</li>
<li><code>posts/</code><ul>
<li><code>index.html</code>: Archive page containing links to all posts</li>
</ul>
</li>
<li><code>category1/</code><ul>
<li><code>index.html</code>: Index page for &quot;category1&quot;</li>
<li><code>post1.html</code>: Post 1</li>
<li><code>post2.html</code>: Post 2</li>
</ul>
</li>
<li><code>category2/</code><ul>
<li><code>index.html</code>: Index page for &quot;category2&quot;</li>
<li><code>post3.html</code>: Post 3</li>
</ul>
</li>
<li><code>assets/</code><ul>
<li><code>test.png</code></li>
</ul>
</li>
<li><code>css/</code><ul>
<li><code>style.css</code>: CSS stylesheet</li>
</ul>
</li>
</ul>
<p>As noted previously, the entire site can viewed directly from the file system (no web server required).</p>

<footer>
<p><a href="../../index.html">Back to home</a></p>
</footer>
</article>
</main>
</body>
</html>
