<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Schemescape: How to benchmark disk drives on Windows</title>
<meta name="description" content="Not sure which drive in your computer is the fastest? Here&#39;s how to benchmark drives on Windows." />

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<link rel="stylesheet" href="../../css/style.css" />

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How to benchmark disk drives on Windows",
  "abstract": "Not sure which drive in your computer is the fastest? Here's how to benchmark drives on Windows.",
  "keywords": "hardware",
  "datePublished": "2021-09-17"
}
</script>
</head>
<body>
<header>
<h1><a href="../../index.html">Schemescape</a></h1>
<p>Development log of a life-long coder</p>
<nav>
<ul>
<li><a href="../../posts/hardware/index.html">hardware</a></li>
</ul>
</nav>
</header>
<main>
<article>
<header>
<h1><a href="../../posts/hardware/benchmarking-drives.html">How to benchmark disk drives on Windows</a></h1>
<p><time datetime="2021-09-17">September 17, 2021</time></p>
</header>
<p>My computer (running Windows) has multiple drives in it and I was wondering which drive is actually the fastest. Fortunately, there&#39;s an app for that.</p>
<h1 id="background">Background</h1>
<p>In the past, I kept up to date on computer hardware (because, let&#39;s be honest, games), but I&#39;ve been lazy for the past decade or so.</p>
<p>I recently inherited some new parts and now I&#39;ve got 3 drives:</p>
<ol>
<li>Cheapo solid state drive I bought off Newegg a few years back</li>
<li>1 TB rotational drive I salvaged from a discarded Western Digital My Book</li>
<li>Fancy new non-volatile memory (NVMe) drive</li>
</ol>
<p>My limited understanding tells me that the NVMe drive should be the fastest and that the rotational drive should be incredibly slow in comparison.</p>
<h1 id="benchmarking-with-diskspd">Benchmarking with DiskSpd</h1>
<p>Enter <a href="https://github.com/Microsoft/diskspd/wiki">DiskSpd</a>, an official disk benchmarking tool from Microsoft. It&#39;s just an executable that you download and run (as administrator).</p>
<p>It has <a href="https://github.com/Microsoft/diskspd/wiki/Command-line-and-parameters">a lot of command line options</a>, but <a href="https://www.windowscentral.com/how-test-hard-drive-performance-diskspd-windows-10">a random article I found directed me to the most relevant ones</a>.</p>
<p>In my case, I&#39;m just interested in read performance, so I ran the following two commands (the first, <code>-s</code>, is for sequential reads and the second, <code>-r</code>, is for random reads):</p>
<pre><code class="language-cmd">diskspd -d10 -c128M -t1 -o1 -Sh -w0 -s d:\tmp.dat
diskspd -d10 -c128M -t1 -o1 -Sh -w0 -r d:\tmp.dat
</code></pre>
<p>These tests run:</p>
<ul>
<li>For 10 seconds</li>
<li>On a 128 MB test file (which DiskSpd leaves behind after it finishes)</li>
<li>On a single thread</li>
<li>With one operation outstanding</li>
<li>Without write caching (probably unnecessary for read tests)</li>
<li>0% of operations are writes</li>
<li>In sequential or random access, as indicated</li>
<li>On a file named d:\tmp.dat (I change the drive letter for each drive, obviously)</li>
</ul>
<h1 id="results">Results</h1>
<table>
<thead>
<tr>
<th>Drive</th>
<th align="right">Sequential (MB/s)</th>
<th align="right">Random (MB/s)</th>
</tr>
</thead>
<tbody><tr>
<td>SATA SSD</td>
<td align="right">190</td>
<td align="right">130</td>
</tr>
<tr>
<td>Rotational</td>
<td align="right">55</td>
<td align="right">8</td>
</tr>
<tr>
<td>NVMe</td>
<td align="right">550</td>
<td align="right">530</td>
</tr>
</tbody></table>
<p>As expected, the NVMe drive was the fastest and the rotational drive was the slowest (especially for random reads)... but the actual gaps are enormous!</p>
<p>I guess if I ever get to a point where I have a project that is big enough that disks become the bottleneck, I can just throw everything over onto the NVMe and enjoy a ~3x speedup. Good to know!</p>

<footer>
<p>&crarr; <a href="../../index.html">Back to home</a></p>
</footer>
</article>
</main>

</body>
</html>
