<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Schemescape</title>
  <subtitle>Development log of a lifelong coder</subtitle>
  <link href="https://log.schemescape.com/feed.xml" rel="self"/>
  <link href="https://log.schemescape.com/"/>
  <updated>2021-09-18T00:00:00Z</updated>
  <id>https://log.schemescape.com/</id>
  <author>
    <name>Schemescape</name>
    <email>log@schemescape.com</email>
  </author>
  
  <entry>
    <title>My ideal static site generator</title>
    <link href="https://log.schemescape.com/posts/static-site-generators/overview/"/>
    <updated>2021-09-11T00:00:00Z</updated>
    <id>https://log.schemescape.com/posts/static-site-generators/overview/</id>
    <content type="html">&lt;p&gt;In the interest of documenting some of my programming misadventures, I&#39;m creating a developer blog. But first, I need a static site generator.&lt;/p&gt;
&lt;h1&gt;Motivation&lt;/h1&gt;
&lt;p&gt;I&#39;m creating a developer blog for a couple of reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Writing helps me organize my thoughts (into bulleted lists)&lt;/li&gt;
&lt;li&gt;Documenting my progress means I don&#39;t have to rely solely on my (unreliable) memory&lt;/li&gt;
&lt;li&gt;Someone, somewhere with a similar problem &lt;em&gt;might&lt;/em&gt; benefit from me writing down my research and solutions&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now, why do I need a static site generator? Two simple reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hosting static content is practically free these days and plain old HTML is supported on basically every device&lt;/li&gt;
&lt;li&gt;Writing HTML by hand becomes painful as soon as you add a second page (&lt;s&gt;something I am hoping to eventually do&lt;/s&gt; done!)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;The ideal setup&lt;/h1&gt;
&lt;h2&gt;Input&lt;/h2&gt;
&lt;p&gt;Ideally, I&#39;d like to organize content as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Content is written using &lt;a href=&quot;https://en.wikipedia.org/wiki/Markdown&quot;&gt;Markdown&lt;/a&gt; (because it&#39;s succinct and ubiquitous)&lt;/li&gt;
&lt;li&gt;Each post is stored in a separate, self-contained file (for easy management)
&lt;ul&gt;
&lt;li&gt;One exception: posts should be able to easily reference each other&lt;/li&gt;
&lt;li&gt;Diagrams and images can be directly embedded into posts&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;File system metadata (e.g. topic folder) is used, where useful&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;My directory structure is going to look like this:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;content/&lt;/code&gt;: Root directory of all blog content
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;posts/&lt;/code&gt;: Root of all blog posts
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;topic1/&lt;/code&gt;: Blog posts organized by topics
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;post1.md&lt;/code&gt;: Blog post 1&lt;/li&gt;
&lt;li&gt;&lt;code&gt;post2.md&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;topic2/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;static/&lt;/code&gt;: Static files (namely CSS)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;templates/&lt;/code&gt;: Template/layout files&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Blog posts will use YAML front matter (draft and keywords are optional, but date is not since Git doesn&#39;t preserve file system dates):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;---
title: Title of blog post
description: Plain text description of the post (for HTML header, blurbs, etc.)
keywords: [search,keywords]
date: Publish date
draft: true
---
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note: I&#39;d like to be able to automatically insert keywords into every post within a given topic.&lt;/p&gt;
&lt;h2&gt;Output&lt;/h2&gt;
&lt;p&gt;The output should be as simple as possible:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Each post should get its own HTML file (and, optimistically, &lt;a href=&quot;https://en.wikipedia.org/wiki/Permalink&quot;&gt;permalink&lt;/a&gt;)
&lt;ul&gt;
&lt;li&gt;Pages should use plain old HTML, using CSS for styling (no JavaScript required)&lt;/li&gt;
&lt;li&gt;References to other posts should use relative links (so that links don&#39;t break if the site is moved or viewed directly from the file system)&lt;/li&gt;
&lt;li&gt;References should be validated at build time&lt;/li&gt;
&lt;li&gt;Embedded resources should be separated out into unique files (I guess you could call this &amp;quot;no images required&amp;quot;)
&lt;ul&gt;
&lt;li&gt;Diagrams should use the SVG format (to support high resolution displays)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Index/archive pages should be generated by aggregating content from multiple posts&lt;/li&gt;
&lt;li&gt;An RSS news feed should be generated&lt;/li&gt;
&lt;li&gt;Non-markdown files (e.g. CSS files, other assets) should pass through, unmodified&lt;/li&gt;
&lt;li&gt;Ideally, I&#39;d like to be able to load the HTML files directly from the file system and have all styling and links work normally (no web server required for testing)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Hosting&lt;/h2&gt;
&lt;p&gt;I&#39;ll store the content in a &lt;a href=&quot;https://git-scm.com/&quot;&gt;Git&lt;/a&gt; repository on &lt;a href=&quot;https://github.com/&quot;&gt;GitHub&lt;/a&gt; for archival purposes.&lt;/p&gt;
&lt;p&gt;The pages will be served using &lt;a href=&quot;https://pages.github.com/&quot;&gt;GitHub Pages&lt;/a&gt; (because it&#39;s fast and free, at least for my purposes).&lt;/p&gt;
</content>
  </entry>
  
  <entry>
    <title>Finding the right static site generator</title>
    <link href="https://log.schemescape.com/posts/static-site-generators/comparison/"/>
    <updated>2021-09-12T00:00:00Z</updated>
    <id>https://log.schemescape.com/posts/static-site-generators/comparison/</id>
    <content type="html">&lt;p&gt;Having already described &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/overview&quot;&gt;my ideal static site generator&lt;/a&gt;, I&#39;m investigating tools that hopefully meet my needs.&lt;/p&gt;
&lt;h1&gt;Static site generators in 2021&lt;/h1&gt;
&lt;p&gt;Given that I don&#39;t want to go back to the &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/pre-markdown&quot;&gt;pre-Markdown stone age&lt;/a&gt; of static site generators, what are my options (that don&#39;t involve building my own)?&lt;/p&gt;
&lt;p&gt;Fortunately, we&#39;re living in the golden age of static site generators. A quick web search turned up the following options (most with splashy landing pages, theme repositories, and even glowing testimonials):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gatsbyjs.com/&quot;&gt;Gatsby&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://gohugo.io/&quot;&gt;Hugo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://nuxtjs.org/&quot;&gt;NuxtJS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://vuepress.vuejs.org/&quot;&gt;VuePress&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.11ty.dev/&quot;&gt;Eleventy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://pagic.org/&quot;&gt;Pagic&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docusaurus.io/&quot;&gt;Docusaurus&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/vercel/next.js/tree/canary/examples/blog-starter&quot;&gt;Next.js&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.getpelican.com/&quot;&gt;Pelican&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/react-static/react-static&quot;&gt;React Static&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://metalsmith.io/&quot;&gt;Metalsmith&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.getzola.org/&quot;&gt;Zola&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Preferences&lt;/h1&gt;
&lt;p&gt;I&#39;m fairly picky about the software I use (&amp;quot;opinionated&amp;quot; some might say). If a piece of software (or a web site) gets in my way, I usually just give up and move on because that first irritation is usually just the first drip of an approaching cascade of frustration.&lt;/p&gt;
&lt;p&gt;For example, am I reading an article on a web site and it asks me to sign up for something? That tab gets closed. If there&#39;s a huge cookie pop-up that doesn&#39;t let me easily opt out? Tab closed. If a piece of new software I&#39;m interested in tells me to install the Java runtime? Forget it! Multi-gigabyte install for a compiler? No thank you. A program takes too long to launch? Uninstall. And so on.&lt;/p&gt;
&lt;p&gt;With that in mind, what am I looking for in a static site generator&#39;s implementation (having &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/overview&quot;&gt;covered the design in a previous post&lt;/a&gt;)?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Must be free and open source without any obnoxious upselling&lt;/li&gt;
&lt;li&gt;Must be simple and quick to install (on Windows, since that&#39;s what I&#39;m using)&lt;/li&gt;
&lt;li&gt;Must not produce complex output (e.g. extraneous JavaScript)&lt;/li&gt;
&lt;li&gt;Must not be extremely slow (it can be a little slow, since my site is currently small)&lt;/li&gt;
&lt;li&gt;Must not require a vast graph of plugins to do what I need (unless there are sane defaults)&lt;/li&gt;
&lt;li&gt;... and probably some other requirements that will become obvious as I investigate further&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Let the battle royale begin!&lt;/h1&gt;
&lt;p&gt;Below is a table summarizing what I found in my research (note: by &amp;quot;portable&amp;quot; I mean content is just a collection of Markdown files with few constraints/conventions):&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Tool&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;Dependencies&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;Output&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;Configuration&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;Portable&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;Templates&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Jekyll&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Ruby&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;HTML&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Simple&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;✔&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://liquidjs.com/&quot;&gt;Liquid&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Gatsby&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Node&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;SPA&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Very complicated&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;?&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://reactjs.org/docs/introducing-jsx.html&quot;&gt;JSX&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Hugo&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;em&gt;None!&lt;/em&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;HTML&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Simple&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;✔&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://gohugo.io/templates/introduction/&quot;&gt;Go templates&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;NuxtJS&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Node, Vue&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;HTML&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;?&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;✖&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://vuejs.org/&quot;&gt;Vue&lt;/a&gt;/&lt;a href=&quot;https://reactjs.org/docs/introducing-jsx.html&quot;&gt;JSX&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;VuePress&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Node, Vue&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;HTML&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;?&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;✖&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://vuejs.org/&quot;&gt;Vue&lt;/a&gt;/&lt;a href=&quot;https://reactjs.org/docs/introducing-jsx.html&quot;&gt;JSX&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Eleventy&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Node&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;HTML&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Simple&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;✔&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://liquidjs.com/&quot;&gt;Liquid&lt;/a&gt;, &lt;a href=&quot;https://www.11ty.dev/docs/languages/&quot;&gt;many more&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Hexo&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Node&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;HTML&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Complicated&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;✖&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://ejs.co/&quot;&gt;EJS&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Pagic&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Deno&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;SPA&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Simple?&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;✔&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://vuejs.org/&quot;&gt;Vue&lt;/a&gt;/&lt;a href=&quot;https://reactjs.org/docs/introducing-jsx.html&quot;&gt;JSX&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Docusaurus&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Node&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;SPA&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Complicated?&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;✖&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://reactjs.org/docs/introducing-jsx.html&quot;&gt;JSX&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Next.js&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Node&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;HTML&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Complicated&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;?&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://reactjs.org/docs/introducing-jsx.html&quot;&gt;JSX&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Pelican&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Python&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;HTML&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Complicated&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;✖&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://jinja.palletsprojects.com/en/3.0.x/&quot;&gt;Jinja&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;React Static&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Node&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;SPA&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Complicated&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;✖&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://reactjs.org/docs/introducing-jsx.html&quot;&gt;JSX&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Metalsmith&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Node&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;HTML&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Complicated&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;✔&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://handlebarsjs.com/&quot;&gt;Handlebars&lt;/a&gt;, &lt;a href=&quot;https://github.com/jstransformers/jstransformer&quot;&gt;many more&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Zola&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;em&gt;None!&lt;/em&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;HTML&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Complicated&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;✔&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://tera.netlify.app/&quot;&gt;Tera&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Note: all of the generators support Markdown, so I didn&#39;t bother adding a column for Markdown support.&lt;/p&gt;
&lt;h1&gt;Summary&lt;/h1&gt;
&lt;p&gt;After my first pass through all of these static site generators, my top picks to investigate further are (in no particular order):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hugo&lt;/li&gt;
&lt;li&gt;Eleventy&lt;/li&gt;
&lt;li&gt;Zola&lt;/li&gt;
&lt;li&gt;and maybe Metalsmith&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Where did the others fall short?&lt;/h2&gt;
&lt;p&gt;A couple of static site generators required installing development environments for languages I&#39;m not interested in:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Jekyll requires Ruby&lt;/li&gt;
&lt;li&gt;Pelican requires Python&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A surprising number of generators wanted to output an over-engineered (for my purposes) single-page app, chock full of JavaScript:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gatsby&lt;/li&gt;
&lt;li&gt;Pagic&lt;/li&gt;
&lt;li&gt;Docusaurus&lt;/li&gt;
&lt;li&gt;React Static&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Several more generators were built to leverage frameworks that I&#39;m not familiar with (and don&#39;t have any plans to learn in the near future):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NuxtJS&lt;/li&gt;
&lt;li&gt;VuePress&lt;/li&gt;
&lt;li&gt;Next.js&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The final two generators I&#39;m hesitant to use appeared to be victims of trying to cater to every possible use case, leading to complicated configuration and/or voluminous documentation (or plugin registries):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hexo&lt;/li&gt;
&lt;li&gt;and probably Metalsmith&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Research notes&lt;/h1&gt;
&lt;p&gt;The previous sections are probably more useful than my &amp;quot;stream of consciousness&amp;quot; notes below, but if you want to see what I was thinking, go ahead and read it!&lt;/p&gt;
&lt;h2&gt;Jekyll&lt;/h2&gt;
&lt;p&gt;First, I&#39;m looking at Jekyll, because it&#39;s &lt;a href=&quot;https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll&quot;&gt;supported out of the box on GitHub Pages&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Naturally, I want to test things locally. Fortunately, &lt;a href=&quot;https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/testing-your-github-pages-site-locally-with-jekyll&quot;&gt;testing locally is documented on GitHub&#39;s site&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We recommend using Bundler to install and run Jekyll. Bundler manages Ruby gem dependencies&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Wait, I have to manage Ruby gem dependencies? Let&#39;s consult the &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll site&lt;/a&gt; to see their &amp;quot;quick-start instructions&amp;quot;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;gem install bundler jekyll&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Alright, it looks like I need a full blown Ruby environment. No thanks!&lt;/p&gt;
&lt;h2&gt;Gatsby&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.gatsbyjs.com/get-started/&quot;&gt;Gatsby requires Node v12+&lt;/a&gt; for installation. I realize this isn&#39;t &amp;quot;fair&amp;quot;, but I actually use Node and NPM, so this isn&#39;t a deal-breaker for me.&lt;/p&gt;
&lt;p&gt;Diving into &lt;a href=&quot;https://www.gatsbyjs.com/how-it-works/&quot;&gt;how Gatsby works&lt;/a&gt;, I see some alarmingly complex boasts:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Combine Content &amp;amp; Data from Anywhere&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This might be overkill. What did they have in mind?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Content Management Systems like WordPress, or Ecommerce platforms like Shopify&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ok, definitely overkill for my purposes. But maybe I can just ignore those features and be happy?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you build your site with Gatsby, your site will be a lightning-fast progressive web app (PWA)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;... but I just want plain old HTML.&lt;/p&gt;
&lt;p&gt;The alarm bells in my head were deafening at this point and things just kept getting worse. Why can&#39;t I copy text from &amp;quot;how it works&amp;quot; page? Why is there a cloud offering for static sites that should just be HTML distributed via a content delivery network?&lt;/p&gt;
&lt;p&gt;Cross Gatsby off my list!&lt;/p&gt;
&lt;h2&gt;Hugo&lt;/h2&gt;
&lt;p&gt;Hugo is written in Go and &lt;a href=&quot;https://gohugo.io/getting-started/installing&quot;&gt;distributed as a single executable&lt;/a&gt;. It doesn&#39;t get any simpler than that! In &lt;a href=&quot;https://gohugo.io/getting-started/quick-start/&quot;&gt;their quick-start&lt;/a&gt;, it looks like posts can be stored in markdown files with front matter for title, date, and draft status:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;---
title: &amp;quot;My First Post&amp;quot;
date: 2019-03-26T08:47:11+01:00
draft: true
---
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Their example output showed a build complete in 11 milliseconds. These are all very good signs so far.&lt;/p&gt;
&lt;p&gt;Hugo has emerged as an early front runner.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: I documented &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/hugo&quot;&gt;my initial look at Hugo&lt;/a&gt;, but did not want to learn the template language.&lt;/p&gt;
&lt;h2&gt;NuxtJS&lt;/h2&gt;
&lt;p&gt;NuxtJS appears to be a static site generator for people who use &lt;a href=&quot;https://v3.vuejs.org/&quot;&gt;Vue&lt;/a&gt;. While Vue is on my list of frameworks to research, I don&#39;t have any experience with it yet. The NuxtJS page mentions server-side rendering which isn&#39;t the approach I&#39;m most interested in these days.&lt;/p&gt;
&lt;p&gt;I&#39;m going to set aside NuxtJS for now.&lt;/p&gt;
&lt;h2&gt;VuePress&lt;/h2&gt;
&lt;p&gt;Two strikes from the VuePress landing page:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;quot;Enjoy the dev experience of Vue + webpack&amp;quot; (since when have I enjoyed webpack?)&lt;/li&gt;
&lt;li&gt;&amp;quot;VuePress generates pre-rendered static HTML for each page, and runs as an SPA once a page is loaded.&amp;quot; (I understand the potential performance benefits, but I don&#39;t want JavaScript to be required and I&#39;m sure there is substantial overhead in doing this, even if latency of subsequent page loads is improved)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Moving along.&lt;/p&gt;
&lt;h2&gt;Eleventy&lt;/h2&gt;
&lt;p&gt;Eleventy requires Node and NPM which, while not optimal, is something I will tolerate since I already need those for a couple of projects. I do wonder if this will eventually become a burden in the future when Node inevitably falls out of favor.&lt;/p&gt;
&lt;p&gt;The first few pages of documentation don&#39;t discuss themes, which I actually find to be semi-encouraging because that implies that I can just hand-author some minimal HTML templates without having to learn some complex theming system.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.11ty.dev/docs/quicktips/&quot;&gt;Eleventy&#39;s quick tips page&lt;/a&gt; boasts some encouraging features:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;quot;Zero Maintenance Tag Pages for your Blog&amp;quot; (nice for categorization)&lt;/li&gt;
&lt;li&gt;&amp;quot;Adding a 404 Not Found Page to your Static Site&amp;quot; (something I hadn&#39;t considered, but appears to be supported on GitHub Pages)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;But there&#39;s also a lot of oddly specific integrations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;quot;Add Edit on GitHub Links to All Pages&amp;quot; (interesting, I suppose)&lt;/li&gt;
&lt;li&gt;&amp;quot;Fetch GitHub Stargazers Count (and More) at Build Time&amp;quot; (... why?)&lt;/li&gt;
&lt;li&gt;&amp;quot;Trigger a Netlify Build Every Day with IFTTT&amp;quot; (ok, now things are getting out of hand)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Eleventy looks interesting; sort of like Jekyll, but using Node/JavaScript. This is my #2 choice at this point.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: I took &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/eleventy&quot;&gt;an initial look at Eleventy&lt;/a&gt; and ended up &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/eleventy-2&quot;&gt;fully integrating it into this site&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Hexo&lt;/h2&gt;
&lt;p&gt;Hexo also requires Node and NPM (similar to Eleventy). Fine.&lt;/p&gt;
&lt;p&gt;Hexo appears to use the &amp;quot;million plugins&amp;quot; architecture that is popular in the Node world. I understand the appeal of isolating each component and not reinventing the wheel, but I usually prefer a more opinionated, top-down approach because it lets everyone have a common setup that they can discuss. For example, I like &lt;a href=&quot;https://parceljs.org/&quot;&gt;Parcel&lt;/a&gt; and not &lt;a href=&quot;https://webpack.js.org/&quot;&gt;webpack&lt;/a&gt;, but I do understand &amp;quot;zero configuration&amp;quot; constraints can come back to bite me later.&lt;/p&gt;
&lt;p&gt;Anyway, &lt;a href=&quot;https://hexo.io/docs/setup&quot;&gt;Hexo&#39;s default&lt;/a&gt; includes EJS, Stylus, and Markdown. I&#39;m not familiar with the first two. Is this going to be geared toward web developers?&lt;/p&gt;
&lt;p&gt;Looking into their &lt;a href=&quot;https://hexo.io/docs/writing&quot;&gt;documentation on writing content&lt;/a&gt;, it appears you create a new post using a tool that&#39;s not your favorite text editor:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ hexo new [layout] &amp;lt;title&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I&#39;m not a fan of using a tool to manage my content because such a tool was inevitably created to generate boilerplate code or follow strict conventions. This leads to hassles when migrating to a new system and prevents you from authoring content when you don&#39;t have your usual development environment handy. I should be able to author content using just a text editor.&lt;/p&gt;
&lt;p&gt;Hexo looks decent, but certainly not any closer to what I want than Hugo or Eleventy. I&#39;ll come back to Hexo, if needed.&lt;/p&gt;
&lt;h2&gt;Pagic&lt;/h2&gt;
&lt;p&gt;Pagic uses Deno which, while intriguing, isn&#39;t something I&#39;ve actually installed or played with yet. Maybe this is the motivation I need to try Deno?&lt;/p&gt;
&lt;p&gt;But unfortunately, Pagic seems to be pushing a Gatsby-like single-page app build which, as noted previously, is not an approach I&#39;m interested in.&lt;/p&gt;
&lt;h2&gt;Docusaurus&lt;/h2&gt;
&lt;p&gt;Docusaurus seems to be targeting technical documentation with support for translating into multiple languages. This is admirable, but I&#39;m hesitant to use complex software when my needs are so simple.&lt;/p&gt;
&lt;h2&gt;Next.js&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://nextjs.org/&quot;&gt;Next.js&lt;/a&gt; appears to be a framework for server-side rendering using React concepts (e.g. JSX). Even with a &lt;a href=&quot;https://github.com/vercel/next.js/tree/canary/examples/blog-starter&quot;&gt;skeleton project&lt;/a&gt; available, similar to the Vue-based static site generators I already looked at, I feel like I wouldn&#39;t benefit from this tool because I&#39;m not already using Next.js for other purposes.&lt;/p&gt;
&lt;h2&gt;Pelican&lt;/h2&gt;
&lt;p&gt;Pelican requires Python. I know that Python is very popular, but I have never really understood the appeal. Sure, having whitespace for identifying blocks looks nice (and is probably more intuitive for people without a C/C++ background), but Python has made too many mistakes in handling compatibility (e.g. &lt;a href=&quot;https://www.python.org/dev/peps/pep-0238/&quot;&gt;changing the semantics of the division operator&lt;/a&gt;), so I&#39;d prefer to just go on pretending Python never existed.&lt;/p&gt;
&lt;h2&gt;React Static&lt;/h2&gt;
&lt;p&gt;Yet another static site generator that adds &lt;em&gt;more&lt;/em&gt; complexity:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;React Static gathers your data, and templates together and intelligently splits them into bite-size static files using webpack and javascript. ... Little did you know that when React Static exported your site, it also generated a tiny, optimized, and code-split version of your original React application for every page of your site! After these pages have loaded, React invisibly mounts this application to the existing HTML on the page and...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;... and I stopped reading.&lt;/p&gt;
&lt;h2&gt;Metalsmith&lt;/h2&gt;
&lt;p&gt;Metalsmith is built on Node and requires you to write actual JavaScript code to build your site.&lt;/p&gt;
&lt;p&gt;While I didn&#39;t really want to have to write code, at least I&#39;d be able to debug the tool when something didn&#39;t behave as expected.&lt;/p&gt;
&lt;p&gt;Metalsmith&#39;s most interesting aspect for me is that it&#39;s modular and pluggable, similar to &lt;a href=&quot;https://gulpjs.com/&quot;&gt;Gulp&lt;/a&gt;. This could come in handy if I need to extend the existing functionality a little (e.g. to allow embedding of images and diagrams).&lt;/p&gt;
&lt;p&gt;Similar to Gulp, I think I&#39;d probably end up frustrated with an endless graph of plugins that interact in bizarre ways, but I &lt;em&gt;might&lt;/em&gt; be willing to give Metalsmith a try if I find too many gaps in the other generators I&#39;ve liked so far.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: I ended up &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/metalsmith&quot;&gt;fully integrating Metalsmith into my site&lt;/a&gt; because I liked the modular architecture and simple plugins met most of my needs.&lt;/p&gt;
&lt;h2&gt;Zola&lt;/h2&gt;
&lt;p&gt;Zola is written in Rust, a language which I&#39;m tired of hearing about (similar to Python), but which I actually think I might one day use (unlike Python). A fast, native binary with no dependencies is certainly a strong start for Zola.&lt;/p&gt;
&lt;p&gt;Annoyingly (from a portability aspect), Zola wants me to use &lt;code&gt;+++&lt;/code&gt; to demarcate front matter in &lt;a href=&quot;https://toml.io/en/&quot;&gt;TOML&lt;/a&gt; (definitely not my preferred metadata language), but &amp;quot;YAML front matter is also supported to ease porting legacy content&amp;quot; -- hopefully that support doesn&#39;t disappear someday!&lt;/p&gt;
&lt;p&gt;Zola&#39;s documentation looks pretty good, and they &lt;a href=&quot;https://www.getzola.org/documentation/templates/overview/#built-in-templates&quot;&gt;explicitly mention support for RSS&lt;/a&gt; as a feature.&lt;/p&gt;
&lt;p&gt;Zola makes it onto my short list.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: I described &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/zola&quot;&gt;my initial experience with Zola&lt;/a&gt;. Similar to &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/hugo&quot;&gt;Hugo&lt;/a&gt;, I set it aside because I didn&#39;t want to learn a new language just for creating page templates.&lt;/p&gt;
&lt;h1&gt;Next steps&lt;/h1&gt;
&lt;p&gt;My next step is to test out Hugo, Eleventy, Zola, etc. to see which one can meet my needs with the least amount of hassle. Stay tuned!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: I tested several static site generators out. My initial reviews are documented below:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/hugo&quot;&gt;Hugo&lt;/a&gt; (didn&#39;t like the template language)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/eleventy&quot;&gt;Eleventy&lt;/a&gt; (subsequent update: &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/eleventy-2&quot;&gt;I&#39;m using Eleventy now&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/zola&quot;&gt;Zola&lt;/a&gt;: (didn&#39;t like TOML or the template language)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/metalsmith&quot;&gt;Metalsmith&lt;/a&gt; (I like it a lot and it will probably dethrone Eleventy for my site)&lt;/li&gt;
&lt;/ul&gt;
</content>
  </entry>
  
  <entry>
    <title>Static site generation anecdotes</title>
    <link href="https://log.schemescape.com/posts/static-site-generators/pre-markdown/"/>
    <updated>2021-09-12T00:00:00Z</updated>
    <id>https://log.schemescape.com/posts/static-site-generators/pre-markdown/</id>
    <content type="html">&lt;p&gt;Feel free to skip this post about my personal history with static sites.&lt;/p&gt;
&lt;h1&gt;Static sites without the generator&lt;/h1&gt;
&lt;p&gt;Prior to the year 2000, I maintained a couple of static web sites using just notepad (no build process or even templates). Redesigning a site required editing every page by hand, so I just tried to avoid redesigns entirely. This tedious experience sowed the seeds of my later static site generator projects.&lt;/p&gt;
&lt;h1&gt;First attempt&lt;/h1&gt;
&lt;p&gt;Fast forward to 2001. When free web page hosting was usually limited to a couple of megabytes and static files (uploaded via &lt;a href=&quot;https://en.wikipedia.org/wiki/File_Transfer_Protocol&quot;&gt;FTP&lt;/a&gt;) were the only option, I actually created a static site generator. It was written in C++ and allowed you to define custom elements using an XML-like syntax. It was one of my earliest programming projects and it introduced me to the joy of creating yet another string class and the horrors of Autoconf. I published it as open source software and, surprisingly, there was one guy who ended up using it for a large site (mostly just because he could store all his content in one huge file).&lt;/p&gt;
&lt;h1&gt;New and improved&lt;/h1&gt;
&lt;p&gt;A year later (in 2002), I rewrote the tool--this time with a domain-specific language (still influenced by XML) and the ability to target multiple output formats (HTML, &lt;a href=&quot;https://en.wikipedia.org/wiki/Man_page&quot;&gt;man pages&lt;/a&gt;, and even plain text). I also wisely used the &lt;code&gt;string&lt;/code&gt; class from C++&#39;s standard library instead of reinventing the wheel. Despite the improvements, I didn&#39;t end up using this tool very much because, frankly, I didn&#39;t have a lot of content to post anyway. I don&#39;t think anyone else ended up using this version of the tool.&lt;/p&gt;
&lt;h1&gt;The UNIX way&lt;/h1&gt;
&lt;p&gt;The following year (2003), I was enamored with the UNIX philosophy of stringing together simple text-based tools, so of course I made yet another static site generator. This one (which I never released, and nearly lost recently) had some unique features, including the ability to aggregate content across multiple sites.&lt;/p&gt;
&lt;p&gt;Unlike my previous tools, this one was not written in C++; in fact, in wasn&#39;t written in a compiled language at all. In true UNIX fashion, this static site generator composed a bunch of standard UNIX tools, using &lt;a href=&quot;https://en.wikipedia.org/wiki/Bourne_shell&quot;&gt;Bourne shell&lt;/a&gt; script as the glue.&lt;/p&gt;
&lt;p&gt;The most user-friendly change was that I switched from XML-like markup to wiki-like plain text formatting (very similar to &lt;a href=&quot;https://en.wikipedia.org/wiki/Markdown&quot;&gt;Markdown&lt;/a&gt;, which didn&#39;t exist at the time). Despite this huge boost in ergonomics, I went overboard with trying to use standard tools and settled on a decidedly &lt;em&gt;not&lt;/em&gt; user-friendly template system based on the ever verbose &lt;a href=&quot;https://www.w3.org/Style/XSL/&quot;&gt;XSLT&lt;/a&gt;. Very contradictory choices...&lt;/p&gt;
&lt;p&gt;The workflow was quite a doozy, utilizing a long list of tools:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Loop through directories using &lt;code&gt;ls&lt;/code&gt; (one for each topic, following symbolic links, if needed)&lt;/li&gt;
&lt;li&gt;Escape topic and post names using &lt;code&gt;tr&lt;/code&gt; for URL-friendliness&lt;/li&gt;
&lt;li&gt;Loop through posts (one directory for each)
&lt;ol&gt;
&lt;li&gt;Test if the file had been modified since last generated&lt;/li&gt;
&lt;li&gt;Resolve the relative path using &lt;code&gt;$PWD&lt;/code&gt; and &lt;code&gt;sed&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Find the &amp;quot;body&amp;quot; (post content) file and format its last modified time using &lt;code&gt;find&lt;/code&gt; and &lt;code&gt;date&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Create a summary using &lt;code&gt;cat ... |head -c 150&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Generate structured XML for the post, as follows
&lt;ol&gt;
&lt;li&gt;Image files were passed through, but thumbnails were generated using &lt;a href=&quot;https://imagemagick.org/index.php&quot;&gt;Image Magick&lt;/a&gt;&#39;s &lt;code&gt;mogrify&lt;/code&gt; tool and captions came from a &lt;code&gt;.caption&lt;/code&gt; file sitting next to the image file&lt;/li&gt;
&lt;li&gt;The content file used my own text-based format that was similar in spirit to Markdown (but Markdown hadn&#39;t been invented yet!)&lt;/li&gt;
&lt;li&gt;My wiki/Markdown-esque format was implemented entirely using regular expressions (via &lt;code&gt;sed&lt;/code&gt;), supporting headings, bold text, bulleted lists, and blocks of text or code&lt;/li&gt;
&lt;li&gt;There was also some automatic branding and linking using &lt;code&gt;m4&lt;/code&gt; for find and replace&lt;/li&gt;
&lt;li&gt;(Non-inline) References to other URLs were simply just files containing a URL&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;Concatenate all the XML files into one big XML file&lt;/li&gt;
&lt;li&gt;Generate a home page, an archive page, an RSS feed using XSLT (via &lt;code&gt;xsltproc&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Generate each post that isn&#39;t up to date using XSLT&lt;/li&gt;
&lt;li&gt;Upload each modified file by generating FTP commands in a shell script and piping that to &lt;a href=&quot;https://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol#SFTP_client&quot;&gt;SFTP&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;It&#39;s a bit convoluted for sure, but (other than not using Markdown, which didn&#39;t exist until 2004) it relied solely on standard tools. Maybe XSL isn&#39;t everyone&#39;s favorite, but at least I didn&#39;t invent my own template language this time!&lt;/p&gt;
&lt;h1&gt;Now what?&lt;/h1&gt;
&lt;p&gt;So what would I do differently today? I already briefly outlined my ideal workflow (using separate files, Markdown, etc.) in the &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/overview&quot;&gt;last post&lt;/a&gt;, but I didn&#39;t delve into implementation details.&lt;/p&gt;
&lt;p&gt;Ideally, I won&#39;t have to create my own static site generator today because there are a lot more &amp;quot;off the shelf&amp;quot; options available in 2021. If I did have to write one, I&#39;d probably use &lt;a href=&quot;https://nodejs.org/en/%5B&quot;&gt;Node&lt;/a&gt; or &lt;a href=&quot;https://deno.land/&quot;&gt;Deno&lt;/a&gt; with &lt;a href=&quot;https://www.typescriptlang.org/&quot;&gt;TypeScript&lt;/a&gt; and possibly &lt;a href=&quot;https://reactjs.org/docs/introducing-jsx.html&quot;&gt;JSX&lt;/a&gt; for templates. Diagrams would perhaps use &lt;a href=&quot;https://mermaid-js.github.io/mermaid/#/&quot;&gt;Mermaid&lt;/a&gt; (rendered to SVG at build time), and the whole thing would have a (gasp) GUI implemented using &lt;a href=&quot;https://microsoft.github.io/monaco-editor/&quot;&gt;Visual Studio Code&#39;s editor component&lt;/a&gt;, packaged in a reasonably sized executable (perhaps using &lt;a href=&quot;https://neutralino.js.org/&quot;&gt;Neutralino&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Here&#39;s hoping I don&#39;t have to build such a tool!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
    <title>Test-driving Hugo for a simple dev blog</title>
    <link href="https://log.schemescape.com/posts/static-site-generators/hugo/"/>
    <updated>2021-09-13T00:00:00Z</updated>
    <id>https://log.schemescape.com/posts/static-site-generators/hugo/</id>
    <content type="html">&lt;p&gt;I&#39;m testing out &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/comparison&quot;&gt;the most promising static site generators&lt;/a&gt; to see which is closest to &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/overview&quot;&gt;my ideal setup&lt;/a&gt;. First up is &lt;a href=&quot;https://gohugo.io/&quot;&gt;Hugo&lt;/a&gt;.&lt;/p&gt;
&lt;h1&gt;Hugo&lt;/h1&gt;
&lt;p&gt;First up is Hugo since it&#39;s the easiest to install and (&lt;a href=&quot;https://jamstack.org/generators/&quot;&gt;according to Jamstack&lt;/a&gt;) is one of the top 3 most loved static site generators.&lt;/p&gt;
&lt;h2&gt;Installation&lt;/h2&gt;
&lt;p&gt;Installation is just downloading a binary. Great!&lt;/p&gt;
&lt;h2&gt;Setup&lt;/h2&gt;
&lt;p&gt;Going through their &lt;a href=&quot;https://gohugo.io/getting-started/quick-start/&quot;&gt;quick start guide&lt;/a&gt;, I use &lt;code&gt;hugo new site quickstart&lt;/code&gt; to create Hugo&#39;s desired directory structure. It&#39;s a bit more convoluted than I expected (what is &lt;code&gt;archetypes&lt;/code&gt; for?). Interesting.&lt;/p&gt;
&lt;h2&gt;Concepts&lt;/h2&gt;
&lt;p&gt;Hugo seems powerful, but, as we all know, power &lt;s&gt;corrupts&lt;/s&gt; introduces complexity. This is my best understanding of Hugo&#39;s concepts (which map to directories):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Archetypes: Default file contents for each types of content file
&lt;ul&gt;
&lt;li&gt;Since I&#39;ve only got a simple dev blog, I&#39;ll probably only need a single &amp;quot;post&amp;quot; content type, and their default (title, date, draft status) is likely sufficient&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Assets: Stores all the files which need be processed by &lt;a href=&quot;https://gohugo.io/hugo-pipes/&quot;&gt;Hugo Pipes&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;This can be used to minify CSS, JavaScript, etc.&lt;/li&gt;
&lt;li&gt;Minifying CSS is a bonus feature I didn&#39;t ask for, but it could be worthwhile&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Content: Actual content can be separated by type (note: I believe this is how archetypes are matched)&lt;/li&gt;
&lt;li&gt;Data: I&#39;m actually unclear on how this is different from the &lt;code&gt;config&lt;/code&gt; directory&lt;/li&gt;
&lt;li&gt;Layout: Templates&lt;/li&gt;
&lt;li&gt;Static: Files that are copied verbatim to the output&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Templates/theme&lt;/h2&gt;
&lt;p&gt;The next step is to add a theme. Huh, I thought I&#39;d just plop in some HTML with curly brackets and build my own site. In the past, every theme I&#39;ve used with a static site generator has been fairly bloated (even so-called &amp;quot;minimal&amp;quot; themes).&lt;/p&gt;
&lt;p&gt;I&#39;ll eventually try and use my hand-crafted, minimal semantic HTML, but I suppose I can start with their suggested initial theme, &amp;quot;Ananke&amp;quot;. It looks like &lt;a href=&quot;https://discourse.gohugo.io/t/whats-the-difference-between-themes-and-layouts/4851&quot;&gt;themes mainly exist to allow reuse by other people&lt;/a&gt;, so I could perhaps even get away without a theme (using layouts exclusively).&lt;/p&gt;
&lt;h2&gt;First run&lt;/h2&gt;
&lt;p&gt;The directory structure is pretty close to what I already had, so I was already to launch the Hugo server:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hugo.exe server -D
Start building sites … 
...
Error: Error building site: TOCSS: failed to transform &amp;quot;ananke/css/main.css&amp;quot; (text/css). Check your Hugo installation; you need the extended version to build SCSS/SASS.
Built in 213 ms
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Well, that&#39;s not encouraging. Apparently there&#39;s an extended version that I glossed over and is quietly required for their quick start. I do wonder why there&#39;s a separate build when the difference in size is only 8%. Maybe it&#39;s bundling other non-Go executables that aren&#39;t available everywhere?&lt;/p&gt;
&lt;p&gt;With &lt;em&gt;extended&lt;/em&gt; Hugo, the site served up fine and the default theme initially looked adequate, but it had a lot of junk I didn&#39;t want. Observations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;There were corporate logos on each post&#39;s page&lt;/li&gt;
&lt;li&gt;An inaccurate copyright notice was added&lt;/li&gt;
&lt;li&gt;My first post&#39;s HTML was 3,957 bytes zipped&lt;/li&gt;
&lt;li&gt;The CSS was 15kb zipped&lt;/li&gt;
&lt;li&gt;Surprisingly, there was also a CSS source map that weighed in at 187kb uncompressed that I see no reason to upload with my site&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I guess I was right to be wary of default themes.&lt;/p&gt;
&lt;p&gt;A few additional Hugo-related notes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Supplying &amp;quot;date&amp;quot; metadata appears to be required in Hugo (unless you want the date to be displayed as &amp;quot;January 1, 0001&amp;quot;)&lt;/li&gt;
&lt;li&gt;Viewing the HTML files on disk led to broken links because a &amp;quot;/&amp;quot; prefix is added to all the links (not the end of the world since &lt;code&gt;hugo.exe&lt;/code&gt; can run a server, but still not what I&#39;d hoped for)&lt;/li&gt;
&lt;li&gt;Hugo generates an entire directory for each post -- I was expecting one directory per category, with HTML files for each post&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Using a custom theme&lt;/h2&gt;
&lt;p&gt;Hugo&#39;s documentation was surprisingly unhelpful when it comes to creating a theme from scratch. At least Hugo is popular enough that I was able to find a blog article about &lt;a href=&quot;https://retrolog.io/blog/creating-a-hugo-theme-from-scratch/&quot;&gt;creating a Hugo theme from scratch&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;My first reaction is that &lt;a href=&quot;https://gohugo.io/templates/introduction/&quot;&gt;Hugo&#39;s template language&lt;/a&gt; is bizarre. I thought I&#39;d just be writing code with Go syntax, but instead I&#39;m seeing examples like this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{{ if (isset .Params &amp;quot;description&amp;quot;) }}
    {{ index .Params &amp;quot;description&amp;quot; }}
{{ else }}
    {{ .Summary }}
{{ end }}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Learning a new language that looks nothing like the languages I&#39;m used to is not something I wanted to have to do for my simple site. Additionally, &lt;a href=&quot;https://gohugo.io/templates/lookup-order/&quot;&gt;Hugo&#39;s lookup rules&lt;/a&gt; are much more complicated than I expected. I&#39;m still not sure if files like &lt;code&gt;layouts/_default/baseof.html&lt;/code&gt; are hard-coded names or if there&#39;s logic somewhere I could simplify in the configuration.&lt;/p&gt;
&lt;p&gt;Additional notes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It looks like the &amp;quot;/&amp;quot; prefix for paths that I saw earlier is just a shortcut for not having to compute the path to the root of the site, e.g. &amp;quot;css/style.css&amp;quot; won&#39;t work when in a subdirectory, but &amp;quot;/css/style.css&amp;quot; will work... unless you&#39;re viewing directly from the file system (where &amp;quot;/&amp;quot; means the file system root)&lt;/li&gt;
&lt;li&gt;I was unable to get the 404 page to work using &lt;code&gt;hugo.exe server&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Let&#39;s stop there for now&lt;/h2&gt;
&lt;p&gt;Although install was simple and the server worked, at this point, I&#39;m not interested in learning Hugo&#39;s unintuitive template language. I honestly found &lt;a href=&quot;https://www.w3.org/Style/XSL/&quot;&gt;XSL&lt;/a&gt; to be more intuitive (and that is not a compliment).&lt;/p&gt;
&lt;p&gt;For posterity, I saved my terribly incomplete theme here:&lt;/p&gt;
&lt;p&gt;https://github.com/jaredkrinke/hugo-bare-minimum&lt;/p&gt;
&lt;p&gt;Let&#39;s hope the next static site generator I try is more my style!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
    <title>Test-driving Eleventy for a simple dev blog</title>
    <link href="https://log.schemescape.com/posts/static-site-generators/eleventy/"/>
    <updated>2021-09-14T00:00:00Z</updated>
    <id>https://log.schemescape.com/posts/static-site-generators/eleventy/</id>
    <content type="html">&lt;p&gt;I&#39;m testing out &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/comparison&quot;&gt;the most promising static site generators&lt;/a&gt; to see which is closest to &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/overview&quot;&gt;my ideal setup&lt;/a&gt;. Next up is &lt;a href=&quot;https://www.11ty.dev/&quot;&gt;Eleventy&lt;/a&gt;.&lt;/p&gt;
&lt;h1&gt;Eleventy&lt;/h1&gt;
&lt;p&gt;Eleventy is a Node-based static site generator that seems to be popular with people who would rather use JavaScript instead of Ruby/Jekyll.&lt;/p&gt;
&lt;h2&gt;Installation&lt;/h2&gt;
&lt;p&gt;Installation is done via NPM. Obnoxiously, if you don&#39;t install globally, &lt;a href=&quot;https://www.11ty.dev/docs/usage/&quot;&gt;there is a non-Eleventy NPM package named &amp;quot;eleventy&amp;quot; that is picked up by default&lt;/a&gt;, so you have to use &lt;code&gt;npx @11ty/eleventy ...&lt;/code&gt; for commands. This is the recommended approach and I find it very awkward to type (NPM scripts seem like a good mitigating practice). At least the other package doesn&#39;t appear to obviously be name squatting malware!&lt;/p&gt;
&lt;h2&gt;Setup&lt;/h2&gt;
&lt;p&gt;Configuration of input/output directories, etc. is done on the command line or in a JavaScript config file (yes, it&#39;s real JavaScript code). Their &lt;a href=&quot;https://www.11ty.dev/docs/config/&quot;&gt;sample&lt;/a&gt; feels a bit convoluted for what amounts to JSON:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;module.exports = function(eleventyConfig) {
  // Return your Object options:
  return {
    dir: {
      input: &amp;quot;views&amp;quot;,
      output: &amp;quot;dist&amp;quot;
    }
  }
};
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I was curious what all might go in an Eleventy configuration file, so I took a peek at their &lt;a href=&quot;https://github.com/11ty/eleventy-base-blog&quot;&gt;official blog sample&lt;/a&gt; and was horrified to see 142 lines of JavaScript code in their &lt;code&gt;.eleventy.js&lt;/code&gt; config file. I thought this was supposed to be the simplest static site generator! Looking more closely, there appear to be helper functions defined in this configuration file. I&#39;m not going to question their design yet, but it makes me nervous.&lt;/p&gt;
&lt;h2&gt;Concepts&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.11ty.dev/docs/&quot;&gt;Eleventy&#39;s documentation&lt;/a&gt; has lots of details, but there isn&#39;t a great overview of all the concepts and the associated directory structure. For example, I still haven&#39;t found a clear definition for their use of the word &amp;quot;template&amp;quot;.&lt;/p&gt;
&lt;p&gt;I&#39;m far from an expert, but here is my understanding of Eleventy&#39;s concepts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Input: directory that content is pulled from (defaults to root)
&lt;ul&gt;
&lt;li&gt;Note: Content is opt &lt;em&gt;out&lt;/em&gt; not opt in, so you have to tell Eleventy which files you don&#39;t want published (this seems like a risky default to me)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Output: directory where built/rendered/copied content goes (for subsequent uploading/publishing)&lt;/li&gt;
&lt;li&gt;Layouts: templates for rendering content; a wide variety of template engines are supported (including Liquid, EJS, JavaScript, but but &lt;a href=&quot;https://github.com/11ty/eleventy/issues/235&quot;&gt;&lt;em&gt;not&lt;/em&gt; JSX&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Data: properties that come from several sources and can be used in layouts, including the file system, per-directory JSON files, templates, YAML front matter in content files&lt;/li&gt;
&lt;li&gt;Collection: specified with the &amp;quot;tags&amp;quot; property, collections are used for iterating over multiple pieces of content&lt;/li&gt;
&lt;li&gt;(Pagination, filters, shortcodes, and custom tags are other concepts I haven&#39;t needed yet)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I found Eleventy&#39;s terminology to be unintuitive (templates vs. layouts vs. includes), but the concepts make sense. The &lt;a href=&quot;https://www.11ty.dev/docs/data-cascade/&quot;&gt;cascading data model&lt;/a&gt; is particularly elegant.&lt;/p&gt;
&lt;p&gt;The default directory structure for a blog could look like this:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(root): By default, the root is the directory from which Eleventy pulls content (note: content is opt &lt;em&gt;out&lt;/em&gt; not opt in)
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;index.html&lt;/code&gt;: Home page for the blog&lt;/li&gt;
&lt;li&gt;&lt;code&gt;_data&lt;/code&gt;: Directory for site-wide data
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;site.json&lt;/code&gt;: Site-wide metadata properties&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;_includes&lt;/code&gt;: Directory for storing templates, etc.
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;post.ejs&lt;/code&gt;: EJS template for blog posts&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;_site&lt;/code&gt;: Output directory (yes, the output directory is a subdirectory of the input directory by default)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;posts&lt;/code&gt;: Directory for storing blog posts
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;posts.json&lt;/code&gt;: Metadata properties to apply to all posts (namely: &lt;code&gt;layout: post.ejs&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;something-interesting.md&lt;/code&gt;: A blog post&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;First run&lt;/h2&gt;
&lt;p&gt;Eleventy&#39;s directory structure initially seemed simpler than Hugo&#39;s, but as I dove in, I found that it muddled distinct concepts and I ended up having to change the configuration quite a bit to give me what I wanted. Because I wanted to separate content from everything else, I ended up with a &lt;code&gt;.eleventy.js&lt;/code&gt; configuration file that looked like this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;module.exports = function(eleventyConfig) {
    // Copy everything under &amp;quot;static&amp;quot; to the root of the built site (note: this is relative to this config file)
    eleventyConfig.addPassthroughCopy({ &amp;quot;static&amp;quot;: &amp;quot;./&amp;quot; });

    return {
        dir: {
            input: &amp;quot;content&amp;quot;,
            output: &amp;quot;out&amp;quot;,
            includes: &amp;quot;../templates&amp;quot; // Note: this is relative to the input directory
        }
    }
};
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;My corresponding directory structure is visible on the &lt;a href=&quot;https://github.com/jaredkrinke/log/tree/eleventy&quot;&gt;eleventy branch of this repository on GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Themes?&lt;/h2&gt;
&lt;p&gt;My experience with Hugo themes wasn&#39;t great because they push hard to make you want to share your theme. Eleventy is basically the opposite. Because configuration is JavaScript code run in Node, you probably don&#39;t want to download others&#39; themes unless you&#39;ve gone through the code to make sure it does only what you want.&lt;/p&gt;
&lt;p&gt;Not supporting themes in a safe manner could be a downside for people who don&#39;t want to create their own templates, but it&#39;s fine for me because I want to craft the HTML myself to ensure it has only what I want (simple HTML) and nothing that I don&#39;t (e.g. social media icons).&lt;/p&gt;
&lt;h2&gt;JavaScript templates&lt;/h2&gt;
&lt;p&gt;Originally, I planned to use a standard template system because that knowledge would be portable across different static site generators. But as I looked at examples of Hugo&#39;s templates or Liquid templates, I came to the conclusion that these template languages are surprisingly ugly and unfamiliar. Eleventy supports plain old JavaScript templates which (security concerns aside, since I&#39;m writing my own templates) is convenient because it&#39;s just JavaScript. Sure, it&#39;s is a quirky language, but with &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals&quot;&gt;template literals&lt;/a&gt;, it&#39;s surprisingly readable (although you have to take care to properly escape everything):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;module.exports = function(data) {
    return `&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt;
    &amp;lt;head&amp;gt;
        &amp;lt;meta charset=&amp;quot;utf-8&amp;quot; /&amp;gt;
        &amp;lt;title&amp;gt;Blog: ${data.title}&amp;lt;/title&amp;gt;
    &amp;lt;/head&amp;gt;
    &amp;lt;body&amp;gt;
        &amp;lt;main&amp;gt;
            &amp;lt;header&amp;gt;&amp;lt;h1&amp;gt;My Blog&amp;lt;/h1&amp;gt;&amp;lt;/header&amp;gt;
            &amp;lt;article&amp;gt;
                &amp;lt;header&amp;gt;
                    &amp;lt;h1&amp;gt;${data.title}&amp;lt;/h1&amp;gt;
                    &amp;lt;p&amp;gt;Date: &amp;lt;time&amp;gt;${data.page.date}&amp;lt;/time&amp;gt;&amp;lt;/p&amp;gt;
                &amp;lt;/header&amp;gt;
                ${data.content}
            &amp;lt;/article&amp;gt;
        &amp;lt;/main&amp;gt;
    &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
`
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Escaping HTML&lt;/h3&gt;
&lt;p&gt;Note: when using Eleventy&#39;s JavaScript template language, I didn&#39;t see a built-in, documented way to escape arbitrary text for inserting into HTML. The &lt;a href=&quot;https://www.npmjs.com/package/escape-html&quot;&gt;escape-html NPM Package&lt;/a&gt; worked for my purposes, but now I feel like I&#39;m getting close to wanting to build my own template language.&lt;/p&gt;
&lt;h2&gt;Issues&lt;/h2&gt;
&lt;h3&gt;Relative links don&#39;t work&lt;/h3&gt;
&lt;p&gt;I&#39;m using relative links to &lt;code&gt;*.md&lt;/code&gt; files for linking between posts, but (at least with the default configuration), those links aren&#39;t being being updated to point to the resulting HTML files. Note: I&#39;m not implying that Eleventy told me this would work -- it&#39;s just part of my desired workflow.&lt;/p&gt;
&lt;h3&gt;Markdown post-processed by default&lt;/h3&gt;
&lt;p&gt;In one of my posts, written in Markdown, I show Liquid/Tera/Jinja syntax (e.g. &lt;code&gt;{%&lt;/code&gt;) inside a code block. With my mostly-default setup, Eleventy tried to interpret this as template syntax, which is definitely not what I would have expected (it&#39;s Markdown, not a template!). Fortunately, you can disable this behavior with the &lt;a href=&quot;https://www.11ty.dev/docs/config/#default-template-engine-for-markdown-files&quot;&gt;markdownTemplateEngine: false&lt;/a&gt; setting.&lt;/p&gt;
&lt;h3&gt;Page URLs aren&#39;t relative&lt;/h3&gt;
&lt;p&gt;This problem isn&#39;t unique to Eleventy (and arguably it&#39;s easier to handle in Eleventy&#39;s JavaScript template language), but Eleventy doesn&#39;t supply relative links to posts -- the &lt;code&gt;page.url&lt;/code&gt; property starts with &lt;code&gt;/&lt;/code&gt;. This prevents you from just viewing the HTML files directly from the file system (and it also makes it difficult to host a site in a subdirectory).&lt;/p&gt;
&lt;p&gt;In my case, since it&#39;s just JavaScript code hosted in Node anyway, I&#39;m using Node&#39;s &lt;a href=&quot;https://nodejs.org/api/path.html#path_path_relative_from_to&quot;&gt;path.posix API&lt;/a&gt; to compute the relative path to the site root.&lt;/p&gt;
&lt;h2&gt;Let&#39;s stop there&lt;/h2&gt;
&lt;p&gt;That&#39;s probably enough for one post.&lt;/p&gt;
&lt;p&gt;Overall, ramping up on Eleventy was more confusing than I anticipated, but all the pain I felt around Hugo&#39;s template language was partially avoided in Eleventy by the ability to use good old JavaScript code. I&#39;m not a fan of some of the design decisions (namely, drawing content from the root folder), but I feel like I could actually end up choosing Eleventy just because it prevents me from having to learn (and, later, remember) another programming language.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: I fully integrated Eleventy into my dev blog, details are in &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/eleventy-2&quot;&gt;part 2&lt;/a&gt;.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
    <title>Test-driving Zola for a simple dev blog</title>
    <link href="https://log.schemescape.com/posts/static-site-generators/zola/"/>
    <updated>2021-09-15T00:00:00Z</updated>
    <id>https://log.schemescape.com/posts/static-site-generators/zola/</id>
    <content type="html">&lt;p&gt;I&#39;m testing out &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/comparison&quot;&gt;the most promising static site generators&lt;/a&gt; to see which is closest to &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/overview&quot;&gt;my ideal setup&lt;/a&gt;. Next up is &lt;a href=&quot;https://www.getzola.org/&quot;&gt;Zola&lt;/a&gt;.&lt;/p&gt;
&lt;h1&gt;Zola&lt;/h1&gt;
&lt;p&gt;Zola is a zero-dependency static site generator, similar to Hugo. Since it&#39;s compiled to native code, I expect it to be fast.&lt;/p&gt;
&lt;h2&gt;Installation&lt;/h2&gt;
&lt;p&gt;I do my development on Windows (despite having been a Linux desktop user in the past), so where do I download the Zola binary? Let&#39;s check the &lt;a href=&quot;https://www.getzola.org/documentation/getting-started/installation/&quot;&gt;Zola docs&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Zola is available on Scoop ... and Chocolatey&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Hmmm... so I have to install software to install my software? Maybe I can go to the &lt;a href=&quot;https://scoop.sh/&quot;&gt;Scoop web site&lt;/a&gt; and find a zip file? It looks like they just have a huge JSON file that points to Zola&#39;s releases on GitHub. Maybe I&#39;ll just go to the &lt;a href=&quot;https://github.com/getzola/zola/releases&quot;&gt;Zola release page&lt;/a&gt; directly. Ok, found a zip file (only 7.5mb, too!). Time to dig in.&lt;/p&gt;
&lt;h2&gt;Concepts&lt;/h2&gt;
&lt;p&gt;Zola&#39;s &lt;a href=&quot;https://www.getzola.org/documentation/getting-started/overview/&quot;&gt;overview documentation&lt;/a&gt; is excellent. It introduces concepts succinctly in the form of an example, while still making it easy for me to skim and jump around to quickly understand the basics. This is the sort of introduction that I wished Hugo and Eleventy had.&lt;/p&gt;
&lt;p&gt;The documentation is so well organized, that I&#39;m not going to bother trying to explain the concepts here -- just go &lt;a href=&quot;https://www.getzola.org/documentation/getting-started/overview/&quot;&gt;read the docs&lt;/a&gt; instead!&lt;/p&gt;
&lt;p&gt;One note: Zola uses a template language called &lt;a href=&quot;https://tera.netlify.app/docs#templates&quot;&gt;Tera&lt;/a&gt; that is supposed to be similar to what Django uses. That might be helpful to some folks, but I haven&#39;t used Django. I don&#39;t like the looks of the language, but the documentation seems adequate.&lt;/p&gt;
&lt;h2&gt;First run&lt;/h2&gt;
&lt;p&gt;Following the documentation to initialize Zola, it oddly demands that the directory be empty (in my case, I already have content, such as this article). This seems unnecessary given that Zola doesn&#39;t actually do anything other than create empty directories (which happen to match my existing naming scheme) along with a configuration file.&lt;/p&gt;
&lt;h2&gt;Some opinions&lt;/h2&gt;
&lt;p&gt;Zola is an opinionated static site generator and sometimes these opinions get in my way. For instance, despite &lt;a href=&quot;https://en.wikipedia.org/wiki/YAML&quot;&gt;YAML&lt;/a&gt; being the standard for front matter, Zola strongly encourages &lt;a href=&quot;https://toml.io/en/&quot;&gt;TOML&lt;/a&gt; (which I find to be unnecessarily verbose for my simple key-string value pairs), and the documentation makes it sound like supporting YAML is a grudging favor for those migrating content out of other systems.&lt;/p&gt;
&lt;p&gt;Additionally, Zola draws a line between the variables it supports and any &amp;quot;extra&amp;quot; variables you want to use. I&#39;m also not sure I like  mixing template input data with content, as Zola does with &lt;code&gt;_index.md&lt;/code&gt; files in each section (this makes sense for, say, keywords, but not as much for custom data that exists solely to modify behavior in a parent template--I&#39;d like to do that in the child template itself).&lt;/p&gt;
&lt;p&gt;Opinions are great for nudging people into good choices when they might not foresee the benefits, but I am starting to wonder if maybe Zola is a little &lt;em&gt;too&lt;/em&gt; opinionated.&lt;/p&gt;
&lt;h2&gt;Templates&lt;/h2&gt;
&lt;p&gt;My experience with static site generators until recently was all home-built stuff, so I don&#39;t have any experience with standard template languages like Tera, Jinja, or Liquid. I like to think my fresh eyes let me accurately grade the ergonomics of template languages for career developers.&lt;/p&gt;
&lt;p&gt;So far, (as with Hugo&#39;s templates) I don&#39;t like what I see. The syntax is incredibly ugly and verbose. Here&#39;s how you mark an input to a template (I was hoping for something more like this JavaScript&#39;s template literal syntax):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{% block content %}{% endblock %}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;How do I supply an input to the template?&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{% block content %}
&amp;lt;p&amp;gt;Content goes here&amp;lt;/p&amp;gt;
{% endblock content %}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The definition is so similar to the declaration that I&#39;m not sure how you even tell them apart if the definition is empty.&lt;/p&gt;
&lt;p&gt;Conditionals also aren&#39;t just expressions which means lots of &lt;code&gt;{%&lt;/code&gt; and &lt;code&gt;%}&lt;/code&gt; in my case where I just want my home page title to be &amp;quot;Blog&amp;quot; and all pages to be &amp;quot;Blog: Some page&amp;quot;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{% if section.extra.root %}
    Blog
{% else %}
    Blog: {{ section.title }}
{% endif %}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ok, enough griping about standard template languages (even if they do seem ripe for a Markdown-like takeover). Some people are probably perfectly at home with Tera/Jinja.&lt;/p&gt;
&lt;h2&gt;I guess we&#39;re stopping here now&lt;/h2&gt;
&lt;p&gt;A little ways into integrating Zola into this blog, I hit a couple of snags:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;zola serve&lt;/code&gt; doesn&#39;t seem to serve up all the pages that &lt;code&gt;zola build&lt;/code&gt; creates -- there was a past Windows-only issue for this, but my problem seems more specific to my particular site&lt;/li&gt;
&lt;li&gt;Zola doesn&#39;t seem to like that I&#39;ve grouped my posts into subdirectories (that don&#39;t represent a new type of content)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If I was persistent, I probably could have solved these problems this evening, but I&#39;m not sure that Zola&#39;s opinions are compatible with my own, so I&#39;m ok with setting this experiment aside for now.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
    <title>Test-driving Eleventy for a simple dev blog, part 2</title>
    <link href="https://log.schemescape.com/posts/static-site-generators/eleventy-2/"/>
    <updated>2021-09-16T00:00:00Z</updated>
    <id>https://log.schemescape.com/posts/static-site-generators/eleventy-2/</id>
    <content type="html">&lt;p&gt;I&#39;m testing out &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/comparison&quot;&gt;the most promising static site generators&lt;/a&gt; for my blog. In &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/eleventy&quot;&gt;part 1&lt;/a&gt;, I recorded my initial impression of Eleventy; in this post, I describe my experience fully integrating Eleventy into my dev blog (&lt;a href=&quot;https://github.com/jaredkrinke/log/tree/eleventy&quot;&gt;final code here&lt;/a&gt;).&lt;/p&gt;
&lt;h1&gt;Background&lt;/h1&gt;
&lt;p&gt;I &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/overview&quot;&gt;already covered my ideal dev blog setup in detail&lt;/a&gt;, but here&#39;s the gist of it:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Content is written using &lt;a href=&quot;https://en.wikipedia.org/wiki/Markdown&quot;&gt;Markdown&lt;/a&gt; (because it&#39;s succinct and ubiquitous)&lt;/li&gt;
&lt;li&gt;Each post is a separate file, with YAML front matter for title, date, description, keywords&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And the corresponding directory structure:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;content/&lt;/code&gt;: Root directory of all blog content
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;posts/&lt;/code&gt;: Root of all blog posts
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;topic1/&lt;/code&gt;: Blog posts organized by topics
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;post1.md&lt;/code&gt;: Blog post 1&lt;/li&gt;
&lt;li&gt;&lt;code&gt;post2.md&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;topic2/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;static/&lt;/code&gt;: Static files (namely CSS)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;templates/&lt;/code&gt;: Template/layout files&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Configuration&lt;/h1&gt;
&lt;p&gt;My initial &lt;code&gt;.eleventy.js&lt;/code&gt; configuration file looked something like this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;module.exports = function(eleventyConfig) {
    // Copy everything under &amp;quot;static&amp;quot; to the root of the built site (note: this is relative to this config file)
    eleventyConfig.addPassthroughCopy({ &amp;quot;static&amp;quot;: &amp;quot;./&amp;quot; });

    return {
        // Don&#39;t process Markdown first with a template language
        markdownTemplateEngine: false,

        dir: {
            input: &amp;quot;content&amp;quot;,
            output: &amp;quot;out&amp;quot;,
            includes: &amp;quot;../templates&amp;quot; // Note: this is relative to the input directory
        }
    }
};
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note: the &lt;code&gt;markdownTemplateEngine: false&lt;/code&gt; setting is to prevent Eleventy from using Liquid to process my Markdown (I don&#39;t want this step because it tries to process all instances of &lt;code&gt;{%&lt;/code&gt;, etc., when I actually want to be able to use those tokens in my blog post content).&lt;/p&gt;
&lt;h1&gt;JavaScript templates: easy to write, hard to maintain&lt;/h1&gt;
&lt;p&gt;After spending the last few posts railing against &amp;quot;unintuivie&amp;quot;, &amp;quot;verbose&amp;quot;, and &amp;quot;ugly&amp;quot; template languages like Liquid and EJS, &lt;a href=&quot;https://www.11ty.dev/docs/languages/javascript/&quot;&gt;Eleventy&#39;s JavaScript templates&lt;/a&gt; felt like a shining beacon of familiarity and simplicity -- it&#39;s just JavaScript! Sure, JavaScript used to be a terrible language (what do you expect for a language that was &lt;a href=&quot;https://web.archive.org/web/20160305202500/http://www.computer.org/csdl/mags/co/2012/02/mco2012020007.pdf&quot;&gt;originally created in 10 days&lt;/a&gt;?), but modern JavaScript is pleasant to write, especially with &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals&quot;&gt;template literals&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I was able to easily dive in and create a bare bones page template (I put this in a shared library, &lt;code&gt;templates\shared.js&lt;/code&gt;):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    renderPage: (data, content) =&amp;gt; `&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt;
    &amp;lt;head&amp;gt;
        &amp;lt;meta charset=&amp;quot;utf-8&amp;quot; /&amp;gt;
        &amp;lt;title&amp;gt;Schemescape${data.title?.length &amp;gt; 0 ? `: ${escapeHTML(data.title)}` : &amp;quot;&amp;quot;}&amp;lt;/title&amp;gt;
        ${data.description ? `&amp;lt;meta name=&amp;quot;description&amp;quot; content=&amp;quot;${escapeHTML(data.description)}&amp;quot; /&amp;gt;` : &amp;quot;&amp;quot;}
        ${data.keywords?.length &amp;gt; 0 ? `&amp;lt;meta name=&amp;quot;keywords&amp;quot; content=&amp;quot;${escapeHTML(data.keywords.join(&amp;quot;,&amp;quot;))}&amp;quot; /&amp;gt;` : &amp;quot;&amp;quot;}
        &amp;lt;meta name=&amp;quot;viewport&amp;quot; content=&amp;quot;width=device-width, initial-scale=1, shrink-to-fit=no&amp;quot; /&amp;gt;
        &amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;${getPagePathToRoot(data)}/css/style.css&amp;quot; /&amp;gt;
        ${/* TODO: RSS */ &amp;quot;&amp;quot;}
    &amp;lt;/head&amp;gt;
    &amp;lt;body&amp;gt;
        &amp;lt;main&amp;gt;
            &amp;lt;header&amp;gt;&amp;lt;h1&amp;gt;&amp;lt;a href=&amp;quot;${getPagePathToRoot(data)}/&amp;quot;&amp;gt;Schemescape&amp;lt;/a&amp;gt;&amp;lt;/h1&amp;gt;&amp;lt;/header&amp;gt;
            ${content}
        &amp;lt;/main&amp;gt;
    &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;`,
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This probably took me 10 minutes to create. But there are a few problems I&#39;ve noticed along the way:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It&#39;s hard to read because it&#39;s constant switching back and forth between strings and code (and the code would balloon if I started pulling code out of the template)&lt;/li&gt;
&lt;li&gt;There&#39;s no syntax validation because it&#39;s just plain text
&lt;ul&gt;
&lt;li&gt;At one point, after moving some HTML around, I forgot to delete an opening tag -- Node doesn&#39;t care because it&#39;s just opaque text! I felt bad that the browser had to try and make sense of my malformed HTML&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;You always have to add code to escape text that might contain quotation marks, etc.
&lt;ul&gt;
&lt;li&gt;Granted, other template languages can be too overzealous about escaping text, leading to mistakes I see all over the web that look like &amp;quot;I&amp;amp;apos;m double-escaped!&amp;quot;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;As noted in a previous post, &amp;quot;themes&amp;quot; become JavaScript code, which seems like a security issue for anyone who wants to just download and try random themes off the web&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Given that I already know JavaScript, for a simple web site like mine, JavaScript templates are quick and easy. I&#39;m not sure I&#39;d want to maintain a large list of such templates, however, because they&#39;re a bit messy and error-prone.&lt;/p&gt;
&lt;p&gt;Note: the template above uses some helpers defined elsewhere in the file, e.g. to compute the path to the root of the site (so I can use relative links and view my HTML directly from the file system). The full code is in &lt;a href=&quot;https://github.com/jaredkrinke/log/blob/eleventy/templates/shared.js&quot;&gt;my GitHub repository, on the eleventy branch&lt;/a&gt;.&lt;/p&gt;
&lt;h1&gt;Blog post pages&lt;/h1&gt;
&lt;p&gt;Setting up blog post pages was pretty simple:&lt;/p&gt;
&lt;h2&gt;1. Create the HTML template&lt;/h2&gt;
&lt;p&gt;I called it &lt;code&gt;templates/post.11ty.js&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;const escapeHTML = require(&amp;quot;escape-html&amp;quot;)
const { renderPage } = require(&amp;quot;./shared&amp;quot;);

const formatDateAsTimeElement = date =&amp;gt; `&amp;lt;time datetime=&amp;quot;${date.toISOString().replace(/T.*$/, &amp;quot;&amp;quot;)}&amp;quot;&amp;gt;${dateFormatter.format(date)}&amp;lt;/time&amp;gt;`;

const renderArticle = data =&amp;gt; `
&amp;lt;article&amp;gt;
    &amp;lt;header&amp;gt;
        &amp;lt;h1&amp;gt;&amp;lt;a href=&amp;quot;./&amp;quot;&amp;gt;${escapeHTML(data.title)}&amp;lt;/a&amp;gt;&amp;lt;/h1&amp;gt;
        &amp;lt;p&amp;gt;${formatDateAsTimeElement(data.page.date)}&amp;lt;/p&amp;gt;
    &amp;lt;/header&amp;gt;
    ${data.content}
&amp;lt;/article&amp;gt;`;

module.exports = data =&amp;gt; renderPage(data, renderArticle(data))
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;2. Inject data into all posts&lt;/h2&gt;
&lt;p&gt;Add &lt;code&gt;content/posts.json&lt;/code&gt; to inject data to all files under the &lt;code&gt;content/posts&lt;/code&gt; directory:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
    &amp;quot;layout&amp;quot;: &amp;quot;post.11ty.js&amp;quot;,
    &amp;quot;tags&amp;quot;: &amp;quot;post&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The first setting selects the template and the second tags all the files as part of the &amp;quot;post&amp;quot; collection (for later iteration).&lt;/p&gt;
&lt;p&gt;With those two simple steps, Eleventy will generate directories with an HTML file for each Markdown source file I write.&lt;/p&gt;
&lt;h1&gt;Adding a home page&lt;/h1&gt;
&lt;p&gt;For now, I&#39;m just aggregating all my posts in reverse chronological order on the home page. Also pretty simple:&lt;/p&gt;
&lt;h2&gt;1. Create the HTML template&lt;/h2&gt;
&lt;p&gt;Along with my generic page template above, the template is pretty simple (note the &lt;code&gt;data.collections.post.slice().reverse().map(...)&lt;/code&gt; part):&lt;/p&gt;
&lt;p&gt;&lt;code&gt;templates/index.11ty.js&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;const { renderPage } = require(&amp;quot;./shared&amp;quot;);

const renderArticleShort = data =&amp;gt; `
&amp;lt;article&amp;gt;
    &amp;lt;header&amp;gt;
        &amp;lt;h1&amp;gt;&amp;lt;a href=&amp;quot;.${data.page.url}&amp;quot;&amp;gt;${data.title}&amp;lt;/a&amp;gt;&amp;lt;/h1&amp;gt;
        &amp;lt;p&amp;gt;${formatDateAsTimeElement(data.page.date)}&amp;lt;/p&amp;gt;
    &amp;lt;/header&amp;gt;
    &amp;lt;summary&amp;gt;&amp;lt;p&amp;gt;${data.description}&amp;lt;/p&amp;gt;&amp;lt;/summary&amp;gt;
&amp;lt;/article&amp;gt;`;

module.exports = data =&amp;gt; renderPage(data,
`&amp;lt;ul&amp;gt;
    ${data.collections.post.slice().reverse().map(post =&amp;gt; `&amp;lt;li&amp;gt;${renderArticleShort(post.data)}&amp;lt;/li&amp;gt;`).join(&amp;quot;\n&amp;quot;)}
&amp;lt;/ul&amp;gt;`);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note: the &lt;code&gt;.slice()&lt;/code&gt; is needed because JavaScript&#39;s &lt;code&gt;reverse()&lt;/code&gt; function mutates the array (&lt;a href=&quot;https://www.11ty.dev/docs/collections/#array-reverse&quot;&gt;as Eleventy&#39;s documentation notes&lt;/a&gt;).&lt;/p&gt;
&lt;h2&gt;2. Add a source file&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;content\index.md&lt;/code&gt; file just points to the template:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;---
layout: index.11ty.js
---
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Eleventy will now build my &lt;code&gt;index.html&lt;/code&gt; file at the root of the output directory.&lt;/p&gt;
&lt;h1&gt;Enabling links between pages&lt;/h1&gt;
&lt;p&gt;I use relative links between my Markdown files for internal links. For example, the post you&#39;re reading is &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/eleventy-2&quot;&gt;&lt;code&gt;eleventy-2.md&lt;/code&gt;&lt;/a&gt; and my previous post on Eleventy is &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/eleventy&quot;&gt;&lt;code&gt;eleventy.md&lt;/code&gt;&lt;/a&gt;. Here&#39;s how I made that second link:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[`eleventy.md`](eleventy.md)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This setup feels natural and works great for Markdown, both in &lt;a href=&quot;https://code.visualstudio.com/Docs/languages/markdown&quot;&gt;Visual Studio Code&#39;s Markdown preview mode&lt;/a&gt;, and when &lt;a href=&quot;https://github.com/jaredkrinke/log/blob/main/content/posts/static-site-generators/eleventy-2.md&quot;&gt;viewing Markdown files in my repository directly on GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I was &lt;em&gt;hoping&lt;/em&gt; that many static site generators would translate these links into ones that worked on the HTML web site, but so far it&#39;s seeming like that was just wishful thinking.&lt;/p&gt;
&lt;p&gt;Fortunately, since I&#39;m not tweaking output locations, this translation is just a simple mechanical process (prepend &amp;quot;../&amp;quot; and remove the &amp;quot;.md&amp;quot; suffix). Even better, there is a markdown-it plugin named &lt;a href=&quot;https://www.npmjs.com/package/markdown-it-replace-link&quot;&gt;markdown-it-replace-link&lt;/a&gt; for making such changes. This plugin can be integrated into Eleventy&#39;s pipeline via the &lt;code&gt;.eleventy.js&lt;/code&gt; config file (after &lt;code&gt;npm install --save-dev markdown-it-replace-link&lt;/code&gt;, of course):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;module.exports = function(eleventyConfig) {
    // Convert relative Markdown file links to relative post links
    const customMarkdownIt = require(&amp;quot;markdown-it&amp;quot;)({
            html: true,
            replaceLink: link =&amp;gt; link.replace(/^([^/][^:]*)\.md$/, &amp;quot;../$1&amp;quot;),
        })
        .use(require(&amp;quot;markdown-it-replace-link&amp;quot;));

    eleventyConfig.setLibrary(&amp;quot;md&amp;quot;, customMarkdownIt);
...
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The regular expression just checks for relative links (not starting with &amp;quot;/&amp;quot; or containing a &amp;quot;:&amp;quot;) that end with &amp;quot;.md&amp;quot; and then prepends &amp;quot;../&amp;quot; and omits the &amp;quot;.md&amp;quot; suffix, to instead point to the source Markdown file&#39;s corresponding output directory (which contains an &lt;code&gt;index.html&lt;/code&gt;).&lt;/p&gt;
&lt;h1&gt;Adding an RSS feed&lt;/h1&gt;
&lt;p&gt;Many of the static site generators I tested out automagically generate an RSS news feed. Eleventy does not do this.&lt;/p&gt;
&lt;p&gt;Eleventy&#39;s documentation points to an &lt;a href=&quot;https://www.11ty.dev/docs/plugins/rss/&quot;&gt;official plugin&lt;/a&gt; for generating an &lt;a href=&quot;https://en.wikipedia.org/wiki/Atom_(Web_standard)&quot;&gt;Atom&lt;/a&gt; feed.&lt;/p&gt;
&lt;p&gt;But if you read the documentation, it becomes apparent that the plugin is just a couple of helpers and the actual Atom template is something you&#39;ll be copy-pasting into your repository. Interestingly, I don&#39;t see any logic in the sample template to limit the number of posts.&lt;/p&gt;
&lt;p&gt;This feels like a shortcoming of Eleventy (and one that probably wouldn&#39;t be difficult to fix). I shouldn&#39;t have to maintain my own template for a standard format.&lt;/p&gt;
&lt;h1&gt;Validating links&lt;/h1&gt;
&lt;p&gt;In the interest of catching mistakes before sharing them with the entire Internet, I&#39;d like to at least validate all of the internal links between my pages at build time.&lt;/p&gt;
&lt;p&gt;My ideal implementation would be a tool that I unleash on the output HTML files, crawling relative links to ensure they&#39;re all valid and that all pages are reachable. It would also ensure that any links to anchors within pages exist. Such a tool probably exists, but I haven&#39;t found it yet.&lt;/p&gt;
&lt;p&gt;For now, I&#39;m just using a quick and dirty hack that validates Markdown files exist in the process of updating the relative links noted previously. The code is fragile and slow enough that I won&#39;t advertise it anymore here, but it is in the repository linked below, if you&#39;re curious.&lt;/p&gt;
&lt;h1&gt;And that&#39;s it!&lt;/h1&gt;
&lt;p&gt;It took a little while to sort out some of the above details, but since I was able to leverage my existing JavaScript knowledge, Eleventy ended up being pretty easy to integrate. As proof, this page exists, and you&#39;re reading it.&lt;/p&gt;
&lt;p&gt;All of the actual code used to generate this page is &lt;a href=&quot;https://github.com/jaredkrinke/log/tree/eleventy&quot;&gt;up on GitHub under the &amp;quot;eleventy&amp;quot; branch&lt;/a&gt;.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
    <title>How to benchmark disk drives on Windows</title>
    <link href="https://log.schemescape.com/posts/hardware/benchmarking-drives/"/>
    <updated>2021-09-17T00:00:00Z</updated>
    <id>https://log.schemescape.com/posts/hardware/benchmarking-drives/</id>
    <content type="html">&lt;p&gt;My computer (running Windows) has multiple drives in it and I was wondering which drive is actually the fastest. Fortunately, there&#39;s an app for that.&lt;/p&gt;
&lt;h1&gt;Background&lt;/h1&gt;
&lt;p&gt;In the past, I kept up to date on computer hardware (because, let&#39;s be honest, games), but I&#39;ve been lazy for the past decade or so.&lt;/p&gt;
&lt;p&gt;I recently inherited some new parts and now I&#39;ve got 3 drives:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Cheapo solid state drive I bought off Newegg a few years back&lt;/li&gt;
&lt;li&gt;1 TB rotational drive I salvaged from a discarded Western Digital My Book&lt;/li&gt;
&lt;li&gt;Fancy new non-volatile memory (NVMe) drive&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;My limited understanding tells me that the NVMe drive should be the fastest and that the rotational drive should be incredibly slow in comparison.&lt;/p&gt;
&lt;h1&gt;Benchmarking with DiskSpd&lt;/h1&gt;
&lt;p&gt;Enter &lt;a href=&quot;https://github.com/Microsoft/diskspd/wiki&quot;&gt;DiskSpd&lt;/a&gt;, an official disk benchmarking tool from Microsoft. It&#39;s just an executable that you download and run (as administrator).&lt;/p&gt;
&lt;p&gt;It has &lt;a href=&quot;https://github.com/Microsoft/diskspd/wiki/Command-line-and-parameters&quot;&gt;a lot of command line options&lt;/a&gt;, but &lt;a href=&quot;https://www.windowscentral.com/how-test-hard-drive-performance-diskspd-windows-10&quot;&gt;a random article I found directed me to the most relevant ones&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In my case, I&#39;m just interested in read performance, so I ran the following two commands (the first, &lt;code&gt;-s&lt;/code&gt;, is for sequential reads and the second, &lt;code&gt;-r&lt;/code&gt;, is for random reads):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;diskspd -d10 -c128M -t1 -o1 -Sh -w0 -s d:\tmp.dat
diskspd -d10 -c128M -t1 -o1 -Sh -w0 -r d:\tmp.dat
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;These tests run:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;For 10 seconds&lt;/li&gt;
&lt;li&gt;On a 128 MB test file (which DiskSpd leaves behind after it finishes)&lt;/li&gt;
&lt;li&gt;On a single thread&lt;/li&gt;
&lt;li&gt;With one operation outstanding&lt;/li&gt;
&lt;li&gt;Without write caching (probably unnecessary for read tests)&lt;/li&gt;
&lt;li&gt;0% of operations are writes&lt;/li&gt;
&lt;li&gt;In sequential or random access, as indicated&lt;/li&gt;
&lt;li&gt;On a file named d:\tmp.dat (I change the drive letter for each drive, obviously)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Results&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Drive&lt;/th&gt;
&lt;th style=&quot;text-align:right&quot;&gt;Sequential (MB/s)&lt;/th&gt;
&lt;th style=&quot;text-align:right&quot;&gt;Random (MB/s)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SATA SSD&lt;/td&gt;
&lt;td style=&quot;text-align:right&quot;&gt;190&lt;/td&gt;
&lt;td style=&quot;text-align:right&quot;&gt;130&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Rotational&lt;/td&gt;
&lt;td style=&quot;text-align:right&quot;&gt;55&lt;/td&gt;
&lt;td style=&quot;text-align:right&quot;&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;NVMe&lt;/td&gt;
&lt;td style=&quot;text-align:right&quot;&gt;550&lt;/td&gt;
&lt;td style=&quot;text-align:right&quot;&gt;530&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;As expected, the NVMe drive was the fastest and the rotational drive was the slowest (especially for random reads)... but the actual gaps are enormous!&lt;/p&gt;
&lt;p&gt;I guess if I ever get to a point where I have a project that is big enough that disks become the bottleneck, I can just throw everything over onto the NVMe and enjoy a ~3x speedup. Good to know!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
    <title>Test-driving Metalsmith for a simple dev blog</title>
    <link href="https://log.schemescape.com/posts/static-site-generators/metalsmith/"/>
    <updated>2021-09-18T00:00:00Z</updated>
    <id>https://log.schemescape.com/posts/static-site-generators/metalsmith/</id>
    <content type="html">&lt;p&gt;I&#39;m testing out &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/comparison&quot;&gt;the most promising static site generators&lt;/a&gt; to see which is closest to &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/overview&quot;&gt;my ideal setup&lt;/a&gt;. Next up is &lt;a href=&quot;https://metalsmith.io/&quot;&gt;Metalsmith&lt;/a&gt;.&lt;/p&gt;
&lt;h1&gt;Metalsmith&lt;/h1&gt;
&lt;p&gt;Metalsmith is a Node-based static site generator with a modular architecture that relies on many small plugins (similar in style to &lt;a href=&quot;https://gulpjs.com/&quot;&gt;gulp&lt;/a&gt;). Installation is done via NPM (but note that you&#39;ll likely need to track down and install many plugins).&lt;/p&gt;
&lt;h2&gt;Architecture&lt;/h2&gt;
&lt;p&gt;Metalsmith is configured using plain old JavaScript code and building the site is just a matter of running your script, which is especially nice for debugging issues. See their &amp;quot;elevator pitch&amp;quot; on the &lt;a href=&quot;https://metalsmith.io/&quot;&gt;Metalsmith home page&lt;/a&gt; for an example. It&#39;s refreshingly simple and transparent, but you&#39;ll need to install plugins and write some code to get a test server with live reloading (unlike many other modern static site generators that support this out the box).&lt;/p&gt;
&lt;p&gt;While vetting and adding plugins is tedious, I like the fact that Metalsmith doesn&#39;t install 500+ packages by default (... like Eleventy).&lt;/p&gt;
&lt;p&gt;Thanks to &lt;a href=&quot;https://github.com/jstransformers/jstransformer&quot;&gt;jstransformer&lt;/a&gt;, Metalsmith supports a wide variety of template languages. I&#39;m not a fan of &lt;a href=&quot;https://liquidjs.com/&quot;&gt;Liquid&lt;/a&gt; or &lt;a href=&quot;https://mozilla.github.io/nunjucks/&quot;&gt;Nunjucks&lt;/a&gt;, but I&#39;m trying out &lt;a href=&quot;https://handlebarsjs.com/&quot;&gt;Handlebars&lt;/a&gt; because I find it more intuitive and less verbose. So far, it seems easier to maintain than the plain JavaScript templates I used with &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/eleventy-2&quot;&gt;Eleventy&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Themes?&lt;/h2&gt;
&lt;p&gt;If you don&#39;t want to author your own HTML templates, Metalsmith honestly doesn&#39;t seem like a good choice. It&#39;s possible to construct a Metalsmith &amp;quot;theme&amp;quot; by combining plugins, configuration, and templates, but really what you&#39;re providing is an entire skeleton project (with a &lt;code&gt;package.json&lt;/code&gt; file, build scripts, and so on). This means the result is less portable and more difficult to integrate (unless you&#39;re starting from scratch and don&#39;t have any opinions or constraints).&lt;/p&gt;
&lt;p&gt;Other static site generators (e.g. Hugo) abstract out the concept of a theme (along with standard metadata that themes can leverage), so you don&#39;t have to mix code and configuration together with HTML templates and CSS styling. This seems better for people who don&#39;t want total control of every character in their final HTML output.&lt;/p&gt;
&lt;h2&gt;Setup&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://metalsmith.io/#introduction&quot;&gt;Metalsmith&#39;s home page&lt;/a&gt; has a sample script right at the top you can look at, but you&#39;ll end up with a bunch of &lt;code&gt;require(...)&lt;/code&gt;s followed by something like this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Metalsmith(__dirname)
    .metadata({
        site: {
            title: &amp;quot;Schemescape&amp;quot;,
            url: &amp;quot;https://log.schemescape.com/&amp;quot;,
            description: &amp;quot;Development log of a life-long coder&amp;quot;,
        },
    })
    .source(&amp;quot;./content&amp;quot;)
    .destination(&amp;quot;./out&amp;quot;)
    .use(collections({
        posts: {
            pattern: &amp;quot;posts/**/*.md&amp;quot;,
            sortBy: &amp;quot;date&amp;quot;,
            reverse: true,
        }
    }))
    .use(markdown())
    .use(layouts({
        directory: &amp;quot;templates&amp;quot;,
        default: &amp;quot;default.hbs&amp;quot;,
    }))
    ...
    .build(err =&amp;gt; { if (err) throw err; });
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you just want to build a dev blog like everyone else, it does feel like a lot of boilerplate code, but I like that it forces you to consider and understand each step of the process. Some of the other static site generators were too proactive and did things I didn&#39;t expect or understand (or want). With Metalsmith, it only does exactly what you tell it.&lt;/p&gt;
&lt;p&gt;But there&#39;s a dark side to Metalsmith&#39;s simple model, and that&#39;s that Metalsmith has to be taught to do even the most basic things. For example, I&#39;m building my site on Windows, which has the unfortunate property of using backslashes for path separators. Metalsmith doesn&#39;t seem to know or care about this detail, so I had to actually write code to switch to web-friendly forward slashes when creating links between files in different directories.&lt;/p&gt;
&lt;h3&gt;Plugins, plugins, plugins&lt;/h3&gt;
&lt;p&gt;Metalsmith&#39;s modular architecture with a very simple core library means you need plugins--a lot of plugins. Fortunately, most of the functionality I was interested in already existed in the form of published plugins (some official, some third party). Here are the ones I used:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Plugin (* = official)&lt;/th&gt;
&lt;th&gt;Purpose&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/segmentio/metalsmith-markdown&quot;&gt;metalsmith-markdown&lt;/a&gt;*&lt;/td&gt;
&lt;td&gt;Translates Markdown to HTML (using &lt;a href=&quot;https://marked.js.org/&quot;&gt;Marked&lt;/a&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/segmentio/metalsmith-drafts&quot;&gt;metalsmith-drafts&lt;/a&gt;*&lt;/td&gt;
&lt;td&gt;Excludes files marked &amp;quot;draft: true&amp;quot; in YAML front matter (yep, you need a plugin for this)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/segmentio/metalsmith-collections&quot;&gt;metalsmith-collections&lt;/a&gt;*&lt;/td&gt;
&lt;td&gt;Groups and sorts files by path (e.g. for listing blog posts)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/segmentio/metalsmith-permalinks&quot;&gt;metalsmith-permalinks&lt;/a&gt;*&lt;/td&gt;
&lt;td&gt;Creates a directory for each HTML file (so links only specify directories and not files)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/metalsmith/metalsmith-layouts&quot;&gt;metalsmith-layouts&lt;/a&gt;*&lt;/td&gt;
&lt;td&gt;Adds support for templates using &lt;a href=&quot;https://github.com/jstransformers&quot;&gt;jstransformers&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/jstransformers/jstransformer-handlebars&quot;&gt;jstransformer-handlebars&lt;/a&gt;*&lt;/td&gt;
&lt;td&gt;Adds support for &lt;a href=&quot;https://handlebarsjs.com/&quot;&gt;Handlebars&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/TheHydroImpulse/metalsmith-static&quot;&gt;metalsmith-static&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Copies static assets (e.g. CSS and my &amp;quot;CNAME&amp;quot; file)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/radiovisual/metalsmith-rootpath&quot;&gt;metalsmith-rootpath&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Computes the path to root of each page (allowing you to use relative links to CSS, etc.)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/timdp/metalsmith-discover-partials&quot;&gt;metalsmith-discover-partials&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Registers &lt;a href=&quot;https://handlebarsjs.com/guide/partials.html&quot;&gt;Handlebar partials&lt;/a&gt; (for reusing/nesting templates)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/hurrymaplelad/metalsmith-feed&quot;&gt;metalsmith-feed&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Creates an RSS feed from a collection&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/davidxmoody/metalsmith-broken-link-checker&quot;&gt;metalsmith-broken-link-checker&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Validates relative links in the final site&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/chiefy/metalsmith-express&quot;&gt;metalsmith-express&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Runs a test server for local testing (with live reloading)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/FWeinb/metalsmith-watch&quot;&gt;metalsmith-watch&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Triggers rebuilds when files are updated (needed for live reloading)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Note that some of the plugins I installed had dependencies flagged by NPM as having vulnerabilities. I reviewed the notices and none seemed concerning for my use case (e.g. all of the input is code/content I wrote and I don&#39;t plan on targeting myself for a regular expression denial of service attack).&lt;/p&gt;
&lt;h3&gt;Missing plugins&lt;/h3&gt;
&lt;p&gt;Despite all these great plugins, I did end up needing to add a little extra functionality. Theoretically, these could be packaged into plugins.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Translate relative &lt;code&gt;*.md&lt;/code&gt; links to point to the corresponding output directories&lt;/li&gt;
&lt;li&gt;Compute relative link paths, with forward slashes only (Metalsmith only provides the source path by default)&lt;/li&gt;
&lt;li&gt;A &amp;quot;no-op&amp;quot; plugin for conditional inclusion of plugins without breaking up the giant configuration chain&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Issues&lt;/h2&gt;
&lt;p&gt;Here are a couple of snags I hit while integrating Metalsmith into my site.&lt;/p&gt;
&lt;h3&gt;Inflexible directory structure&lt;/h3&gt;
&lt;p&gt;For how simple Metalsmith is, I figured it would allow for a flexible directory structure, but Metalsmith actually only allows a single source directory by default. This is a problem for my directory structure because I separated all of my content (Markdown files) from files needed to build the web site (scripts, templates, but also CSS). Fortunately, the &lt;a href=&quot;https://github.com/TheHydroImpulse/metalsmith-static&quot;&gt;metalsmith-static&lt;/a&gt; plugin handle this scenario:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;const assets = require(&amp;quot;metalsmith-static&amp;quot;);

Metalsmith
...
    .use(assets({
        src: &amp;quot;static&amp;quot;,
        dest: &amp;quot;.&amp;quot;,
    }))
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Destination paths aren&#39;t available&lt;/h3&gt;
&lt;p&gt;Somewhere in Metalsmith&#39;s pipeline, it knows where a file is going to end up, but for some inexplicable reason, this information isn&#39;t available to templates or plugins. In my case, it&#39;s easy to infer the destination (although I had to deal with Windows&#39; annoying path-separating backslashes), so it wasn&#39;t a big deal, but this really isn&#39;t something I should have had to think about.&lt;/p&gt;
&lt;h3&gt;Plugin ordering&lt;/h3&gt;
&lt;p&gt;Since plugins enrich and mutate files and metadata along the way, the ordering of plugins matters. One annoying interaction was between the &amp;quot;layouts&amp;quot; (templating) and &amp;quot;feed&amp;quot; (RSS) plugins:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;quot;Feed&amp;quot; then &amp;quot;layouts&amp;quot;: the RSS feed gets wrapped in HTML (&amp;quot;layouts&amp;quot; is run on &lt;em&gt;every&lt;/em&gt; file by default)&lt;/li&gt;
&lt;li&gt;&amp;quot;Layouts&amp;quot; then &amp;quot;feed&amp;quot;: the RSS content for each post is now a full HTML page, because templates were already applied&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The fix in this case was to run &amp;quot;layouts&amp;quot; after &amp;quot;feed&amp;quot; but tell &amp;quot;layouts&amp;quot; to only process HTML files (and not &amp;quot;feed.xml&amp;quot;).&lt;/p&gt;
&lt;p&gt;This all makes sense if you think about how Metalsmith plugins receive a set of files, manipulate them, and then pass them on to the next plugin, but other generators do a good job of insulating me from mistakes like this.&lt;/p&gt;
&lt;h3&gt;Handling internal links&lt;/h3&gt;
&lt;p&gt;I&#39;m still surprised that using relative links to Markdown files for internal linking between posts isn&#39;t well supported by the static site generators I&#39;ve tried so far (Metalsmith included). I ended up having to extend the &lt;a href=&quot;https://marked.js.org/using_pro#renderer&quot;&gt;Marked renderer&lt;/a&gt; to enable internal links:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;const marked = require(&amp;quot;marked&amp;quot;);
...
// Translate relative Markdown links to point to corresponding HTML output files
const markdownRenderer = new marked.Renderer();
const baseLinkRenderer = markdownRenderer.link;
markdownRenderer.link = function (href, title, text) {
    return baseLinkRenderer.call(this,
        href.replace(/^([^/][^:]*)\.md$/, &amp;quot;../$1&amp;quot;),
        title,
        text);
};
...
Metalsmith
...
    .use(markdown({ renderer: markdownRenderer }))
    .use(permalinks())
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Overall, I really liked that Metalsmith just did exactly what I asked, even if I didn&#39;t initially know what, precisely, I wanted. I was able to find plugins for almost everything to get started (including local testing with live reloading). Importantly, I also feel like I fully understand what Metalsmith is doing, so I don&#39;t have to worry about later discovering that it was processing files multiple times (something that did happen with Eleventy).&lt;/p&gt;
&lt;p&gt;Additionally, because Metalsmith is so simple to extend, I can actually foresee myself writing a plugin to, say, add inline diagrams that are automatically converted to SVG at build time (a feature that&#39;s part of my &lt;a href=&quot;https://log.schemescape.com/posts/static-site-generators/overview&quot;&gt;my ideal workflow&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;One comment on Handlebars: this isn&#39;t a review of Handlebars, but I did find Handlebars to be a surprisingly agreeable template language. This is actually high praise coming from me, since I find most template languages to be hideous and verbose.&lt;/p&gt;
&lt;p&gt;Overall, I&#39;m very happy with Metalsmith, and it&#39;s likely that I will be using it moving forward.&lt;/p&gt;
&lt;p&gt;For reference, all of my code is here:
&lt;a href=&quot;https://github.com/jaredkrinke/log/tree/metalsmith&quot;&gt;https://github.com/jaredkrinke/log/tree/metalsmith&lt;/a&gt;&lt;/p&gt;
</content>
  </entry>
</feed>